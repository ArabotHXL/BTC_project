{% extends "hosting/hosting_base.html" %}

{% block page_title %}{% if current_lang == 'en' %}Miner Connection Setup Guide{% else %}çŸ¿æœºè¿æ¥è®¾ç½®æŒ‡å—{% endif %}{% endblock %}
{% block page_subtitle %}{% if current_lang == 'en' %}Complete guide for mining farm administrators{% else %}çŸ¿åœºç®¡ç†å‘˜å®Œæ•´æ“ä½œæ‰‹å†Œ{% endif %}{% endblock %}

{% block header_actions %}
{{ super() }}
<div class="btn-group ms-3" role="group">
    <a href="{{ url_for('hosting_service_bp.miner_setup_guide_pdf') }}" class="btn btn-hosting-primary btn-sm" target="_blank">
        <i class="bi bi-file-pdf me-1"></i>{% if current_lang == 'en' %}Download PDF{% else %}ä¸‹è½½PDFç‰ˆæœ¬{% endif %}
    </a>
    <a href="{{ url_for('hosting_service_bp.host_view', view_type='devices') }}" class="btn btn-hosting-secondary btn-sm">
        <i class="bi bi-arrow-left me-1"></i>{% if current_lang == 'en' %}Back{% else %}è¿”å›{% endif %}
    </a>
</div>
{% endblock %}

{% block content %}

<!-- ç›®å½•å¯¼èˆª -->
<div class="hosting-card mb-4">
    <div class="hosting-card-header">
        <h5 class="hosting-card-title">
            <i class="bi bi-list-ul me-2"></i>{% if current_lang == 'en' %}Table of Contents{% else %}ç›®å½•{% endif %}
        </h5>
    </div>
    <div class="hosting-card-body">
        <div class="row">
            <div class="col-md-6">
                <ul class="list-unstyled">
                    <li class="mb-2">
                        <a href="#section-1" class="text-decoration-none">
                            <i class="bi bi-1-circle-fill me-2" style="color: #f7931a;"></i>
                            {% if current_lang == 'en' %}Preparation{% else %}å‡†å¤‡å·¥ä½œ{% endif %}
                        </a>
                    </li>
                    <li class="mb-2">
                        <a href="#section-2" class="text-decoration-none">
                            <i class="bi bi-2-circle-fill me-2" style="color: #f7931a;"></i>
                            {% if current_lang == 'en' %}Adding Miners{% else %}æ·»åŠ çŸ¿æœº{% endif %}
                        </a>
                    </li>
                    <li class="mb-2">
                        <a href="#section-3" class="text-decoration-none">
                            <i class="bi bi-3-circle-fill me-2" style="color: #f7931a;"></i>
                            {% if current_lang == 'en' %}Testing Connection{% else %}æµ‹è¯•è¿æ¥{% endif %}
                        </a>
                    </li>
                </ul>
            </div>
            <div class="col-md-6">
                <ul class="list-unstyled">
                    <li class="mb-2">
                        <a href="#section-4" class="text-decoration-none">
                            <i class="bi bi-4-circle-fill me-2" style="color: #f7931a;"></i>
                            {% if current_lang == 'en' %}Viewing Real-time Data{% else %}æŸ¥çœ‹å®æ—¶æ•°æ®{% endif %}
                        </a>
                    </li>
                    <li class="mb-2">
                        <a href="#section-5" class="text-decoration-none">
                            <i class="bi bi-5-circle-fill me-2" style="color: #f7931a;"></i>
                            {% if current_lang == 'en' %}Alert System{% else %}å‘Šè­¦ç³»ç»Ÿ{% endif %}
                        </a>
                    </li>
                    <li class="mb-2">
                        <a href="#section-6" class="text-decoration-none">
                            <i class="bi bi-6-circle-fill me-2" style="color: #f7931a;"></i>
                            {% if current_lang == 'en' %}Troubleshooting{% else %}æ•…éšœæ’æŸ¥{% endif %}
                        </a>
                    </li>
                    <li class="mb-2">
                        <a href="#section-7" class="text-decoration-none">
                            <i class="bi bi-7-circle-fill me-2" style="color: #f7931a;"></i>
                            {% if current_lang == 'en' %}Local Deployment{% else %}æœ¬åœ°éƒ¨ç½²{% endif %}
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>

<!-- ç« èŠ‚1: å‡†å¤‡å·¥ä½œ -->
<div class="hosting-card mb-4" id="section-1">
    <div class="hosting-card-header">
        <h4 class="hosting-card-title">
            <i class="bi bi-1-circle-fill me-2" style="color: #f7931a;"></i>
            {% if current_lang == 'en' %}Preparation{% else %}å‡†å¤‡å·¥ä½œ{% endif %}
        </h4>
    </div>
    <div class="hosting-card-body">
        {% if current_lang == 'en' %}
        <h5 class="mb-3">Enable CGMiner API</h5>
        <p>Before connecting miners to the management system, you need to enable the CGMiner API on each device:</p>
        
        <div class="alert alert-warning">
            <i class="bi bi-exclamation-triangle-fill me-2"></i>
            <strong>Important:</strong> CGMiner API must be enabled for real-time monitoring to work.
        </div>
        
        <ol class="mb-4">
            <li class="mb-3">
                <strong>Access Miner Web Interface</strong>
                <p>Navigate to your miner's IP address in a web browser (e.g., http://192.168.1.100)</p>
            </li>
            <li class="mb-3">
                <strong>Login to Admin Panel</strong>
                <p>Use default credentials (usually root/root or admin/admin) or your custom credentials</p>
            </li>
            <li class="mb-3">
                <strong>Enable API Access</strong>
                <p>Go to <code>Miner Configuration</code> â†’ <code>API Settings</code></p>
                <ul>
                    <li>Enable API: <strong>Yes</strong></li>
                    <li>API Port: <strong>4028</strong> (default)</li>
                    <li>API Allow: <strong>0/0</strong> (allow all IPs) or specify your management system IP</li>
                </ul>
            </li>
            <li class="mb-3">
                <strong>Save & Reboot</strong>
                <p>Save the configuration and reboot the miner for changes to take effect</p>
            </li>
        </ol>
        
        <h5 class="mb-3 mt-4">Network Configuration</h5>
        <p>Ensure proper network connectivity between miners and the management system:</p>
        
        <div class="text-center mb-3">
            <img src="{{ url_for('static', filename='images/guide/network_topology.svg') }}" 
                 alt="Network Topology" 
                 class="img-fluid rounded border border-warning"
                 style="max-width: 600px;"
                 onerror="this.style.display='none'">
        </div>
        
        <ul class="mb-4">
            <li><strong>Network Requirements:</strong>
                <ul>
                    <li>Miners and management system must be on the same network or have routing configured</li>
                    <li>Port 4028 (TCP) must be accessible from the management system to each miner</li>
                    <li>Firewall rules should allow incoming connections on port 4028</li>
                </ul>
            </li>
            <li><strong>IP Address Assignment:</strong>
                <ul>
                    <li>Use static IP addresses for miners (recommended)</li>
                    <li>Or configure DHCP reservations based on MAC addresses</li>
                    <li>Document the IP address of each miner's serial number</li>
                </ul>
            </li>
        </ul>
        
        <div class="alert alert-info">
            <i class="bi bi-info-circle-fill me-2"></i>
            <strong>Tip:</strong> Test connectivity using telnet or nc command: <code>telnet 192.168.1.100 4028</code>
        </div>
        
        {% else %}
        <h5 class="mb-3">å¯ç”¨CGMiner API</h5>
        <p>åœ¨å°†çŸ¿æœºè¿æ¥åˆ°ç®¡ç†ç³»ç»Ÿä¹‹å‰ï¼Œæ‚¨éœ€è¦åœ¨æ¯å°è®¾å¤‡ä¸Šå¯ç”¨CGMiner APIï¼š</p>
        
        <div class="alert alert-warning">
            <i class="bi bi-exclamation-triangle-fill me-2"></i>
            <strong>é‡è¦ï¼š</strong>å¿…é¡»å¯ç”¨CGMiner APIæ‰èƒ½è¿›è¡Œå®æ—¶ç›‘æ§ã€‚
        </div>
        
        <ol class="mb-4">
            <li class="mb-3">
                <strong>è®¿é—®çŸ¿æœºWebç•Œé¢</strong>
                <p>åœ¨Webæµè§ˆå™¨ä¸­å¯¼èˆªåˆ°çŸ¿æœºçš„IPåœ°å€ï¼ˆä¾‹å¦‚ï¼šhttp://192.168.1.100ï¼‰</p>
            </li>
            <li class="mb-3">
                <strong>ç™»å½•ç®¡ç†é¢æ¿</strong>
                <p>ä½¿ç”¨é»˜è®¤å‡­æ®ï¼ˆé€šå¸¸æ˜¯root/rootæˆ–admin/adminï¼‰æˆ–æ‚¨çš„è‡ªå®šä¹‰å‡­æ®</p>
            </li>
            <li class="mb-3">
                <strong>å¯ç”¨APIè®¿é—®</strong>
                <p>å‰å¾€<code>çŸ¿æœºé…ç½®</code> â†’ <code>APIè®¾ç½®</code></p>
                <ul>
                    <li>å¯ç”¨APIï¼š<strong>æ˜¯</strong></li>
                    <li>APIç«¯å£ï¼š<strong>4028</strong>ï¼ˆé»˜è®¤ï¼‰</li>
                    <li>APIå…è®¸ï¼š<strong>0/0</strong>ï¼ˆå…è®¸æ‰€æœ‰IPï¼‰æˆ–æŒ‡å®šæ‚¨çš„ç®¡ç†ç³»ç»ŸIP</li>
                </ul>
            </li>
            <li class="mb-3">
                <strong>ä¿å­˜å¹¶é‡å¯</strong>
                <p>ä¿å­˜é…ç½®å¹¶é‡å¯çŸ¿æœºä»¥ä½¿æ›´æ”¹ç”Ÿæ•ˆ</p>
            </li>
        </ol>
        
        <h5 class="mb-3 mt-4">ç½‘ç»œé…ç½®</h5>
        <p>ç¡®ä¿çŸ¿æœºä¸ç®¡ç†ç³»ç»Ÿä¹‹é—´å…·æœ‰æ­£ç¡®çš„ç½‘ç»œè¿æ¥ï¼š</p>
        
        <div class="text-center mb-3">
            <img src="{{ url_for('static', filename='images/guide/network_topology.svg') }}" 
                 alt="ç½‘ç»œæ‹“æ‰‘å›¾" 
                 class="img-fluid rounded border border-warning"
                 style="max-width: 600px;"
                 onerror="this.style.display='none'">
        </div>
        
        <ul class="mb-4">
            <li><strong>ç½‘ç»œè¦æ±‚ï¼š</strong>
                <ul>
                    <li>çŸ¿æœºå’Œç®¡ç†ç³»ç»Ÿå¿…é¡»åœ¨åŒä¸€ç½‘ç»œä¸Šæˆ–å·²é…ç½®è·¯ç”±</li>
                    <li>ä»ç®¡ç†ç³»ç»Ÿåˆ°æ¯å°çŸ¿æœºçš„4028ç«¯å£ï¼ˆTCPï¼‰å¿…é¡»å¯è®¿é—®</li>
                    <li>é˜²ç«å¢™è§„åˆ™åº”å…è®¸4028ç«¯å£çš„ä¼ å…¥è¿æ¥</li>
                </ul>
            </li>
            <li><strong>IPåœ°å€åˆ†é…ï¼š</strong>
                <ul>
                    <li>ä¸ºçŸ¿æœºä½¿ç”¨é™æ€IPåœ°å€ï¼ˆæ¨èï¼‰</li>
                    <li>æˆ–åŸºäºMACåœ°å€é…ç½®DHCPä¿ç•™</li>
                    <li>è®°å½•æ¯å°çŸ¿æœºåºåˆ—å·å¯¹åº”çš„IPåœ°å€</li>
                </ul>
            </li>
        </ul>
        
        <div class="alert alert-info">
            <i class="bi bi-info-circle-fill me-2"></i>
            <strong>æç¤ºï¼š</strong>ä½¿ç”¨telnetæˆ–ncå‘½ä»¤æµ‹è¯•è¿æ¥æ€§ï¼š<code>telnet 192.168.1.100 4028</code>
        </div>
        {% endif %}
    </div>
</div>

<!-- ç« èŠ‚2: æ·»åŠ çŸ¿æœº -->
<div class="hosting-card mb-4" id="section-2">
    <div class="hosting-card-header">
        <h4 class="hosting-card-title">
            <i class="bi bi-2-circle-fill me-2" style="color: #f7931a;"></i>
            {% if current_lang == 'en' %}Adding Miners to the System{% else %}æ·»åŠ çŸ¿æœºåˆ°ç³»ç»Ÿ{% endif %}
        </h4>
    </div>
    <div class="hosting-card-body">
        {% if current_lang == 'en' %}
        <h5 class="mb-3">Step-by-Step Guide</h5>
        
        <ol class="mb-4">
            <li class="mb-3">
                <strong>Navigate to Miner Management</strong>
                <p>Go to <code>Hosting</code> â†’ <code>Miner Management</code> in the main menu</p>
            </li>
            <li class="mb-3">
                <strong>Click "Add Miner" Button</strong>
                <p>Located in the top-right corner of the page</p>
                <div class="text-center my-3">
                    <img src="{{ url_for('static', filename='images/guide/add_miner_button.svg') }}" 
                         alt="Add Miner Button" 
                         class="img-fluid rounded border border-warning"
                         style="max-width: 500px;"
                         onerror="this.style.display='none'">
                </div>
            </li>
            <li class="mb-3">
                <strong>Fill in Required Fields</strong>
                <table class="table table-bordered table-dark">
                    <thead>
                        <tr>
                            <th>Field</th>
                            <th>Description</th>
                            <th>Example</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Serial Number *</strong></td>
                            <td>Unique identifier of the miner (found on device label)</td>
                            <td>S19PRO-123456789</td>
                        </tr>
                        <tr>
                            <td><strong>Miner Model *</strong></td>
                            <td>Select from dropdown list</td>
                            <td>Antminer S19 Pro</td>
                        </tr>
                        <tr>
                            <td><strong>Site *</strong></td>
                            <td>Mining facility location</td>
                            <td>Texas DataCenter A</td>
                        </tr>
                        <tr>
                            <td><strong>Customer *</strong></td>
                            <td>Miner owner (for hosted miners)</td>
                            <td>John Smith</td>
                        </tr>
                        <tr>
                            <td><strong>Actual Hashrate *</strong></td>
                            <td>Expected hashrate in TH/s</td>
                            <td>110</td>
                        </tr>
                        <tr>
                            <td><strong>Actual Power *</strong></td>
                            <td>Power consumption in Watts</td>
                            <td>3250</td>
                        </tr>
                        <tr>
                            <td><strong>IP Address</strong></td>
                            <td>Network IP address of the miner (for CGMiner API connection)</td>
                            <td>192.168.1.100</td>
                        </tr>
                        <tr>
                            <td><strong>Rack Position</strong></td>
                            <td>Physical location in the facility</td>
                            <td>Row 3, Rack 12, Shelf 5</td>
                        </tr>
                        <tr>
                            <td><strong>MAC Address</strong></td>
                            <td>Network MAC address for device identification</td>
                            <td>AA:BB:CC:DD:EE:FF</td>
                        </tr>
                        <tr>
                            <td><strong>Notes</strong></td>
                            <td>Additional information</td>
                            <td>Firmware v2.1, custom cooling</td>
                        </tr>
                    </tbody>
                </table>
                <p><small class="text-muted">* Required fields</small></p>
            </li>
            <li class="mb-3">
                <strong>Submit the Form</strong>
                <p>Click the <span class="badge bg-warning text-dark">Save Miner</span> button</p>
                <p>For site owners/admins: The miner is automatically <span class="badge bg-success">Approved</span></p>
                <p>For clients: The miner will be added with <span class="badge bg-info">Pending Approval</span> status</p>
            </li>
            <li class="mb-3">
                <strong>Approval Process (for client-submitted miners)</strong>
                <ul>
                    <li>Client submits miner request via the Add Miner form</li>
                    <li>Admin reviews and approves/rejects the request</li>
                    <li>Approved miners become <span class="badge bg-success">Approved</span> and operational</li>
                </ul>
            </li>
        </ol>
        
        <div class="alert alert-success">
            <i class="bi bi-check-circle-fill me-2"></i>
            <strong>Best Practice:</strong> Double-check serial number and miner specifications before submitting to avoid errors.
        </div>
        
        {% else %}
        <h5 class="mb-3">åˆ†æ­¥æŒ‡å—</h5>
        
        <ol class="mb-4">
            <li class="mb-3">
                <strong>å¯¼èˆªåˆ°çŸ¿æœºç®¡ç†</strong>
                <p>åœ¨ä¸»èœå•ä¸­é€‰æ‹©<code>æ‰˜ç®¡æœåŠ¡</code> â†’ <code>çŸ¿æœºç®¡ç†</code></p>
            </li>
            <li class="mb-3">
                <strong>ç‚¹å‡»"æ·»åŠ çŸ¿æœº"æŒ‰é’®</strong>
                <p>ä½äºé¡µé¢å³ä¸Šè§’</p>
                <div class="text-center my-3">
                    <img src="{{ url_for('static', filename='images/guide/add_miner_button.svg') }}" 
                         alt="æ·»åŠ çŸ¿æœºæŒ‰é’®" 
                         class="img-fluid rounded border border-warning"
                         style="max-width: 500px;"
                         onerror="this.style.display='none'">
                </div>
            </li>
            <li class="mb-3">
                <strong>å¡«å†™å¿…å¡«å­—æ®µ</strong>
                <table class="table table-bordered table-dark">
                    <thead>
                        <tr>
                            <th>å­—æ®µ</th>
                            <th>è¯´æ˜</th>
                            <th>ç¤ºä¾‹</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>åºåˆ—å· *</strong></td>
                            <td>çŸ¿æœºçš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼ˆåœ¨è®¾å¤‡æ ‡ç­¾ä¸Šï¼‰</td>
                            <td>S19PRO-123456789</td>
                        </tr>
                        <tr>
                            <td><strong>çŸ¿æœºå‹å· *</strong></td>
                            <td>ä»ä¸‹æ‹‰åˆ—è¡¨ä¸­é€‰æ‹©</td>
                            <td>Antminer S19 Pro</td>
                        </tr>
                        <tr>
                            <td><strong>ç«™ç‚¹ *</strong></td>
                            <td>çŸ¿åœºä½ç½®</td>
                            <td>å¾·å·æ•°æ®ä¸­å¿ƒA</td>
                        </tr>
                        <tr>
                            <td><strong>å®¢æˆ· *</strong></td>
                            <td>çŸ¿æœºæ‰€æœ‰è€…ï¼ˆæ‰˜ç®¡çŸ¿æœºï¼‰</td>
                            <td>å¼ ä¸‰</td>
                        </tr>
                        <tr>
                            <td><strong>å®é™…ç®—åŠ› *</strong></td>
                            <td>é¢„æœŸç®—åŠ›ï¼ˆTH/sï¼‰</td>
                            <td>110</td>
                        </tr>
                        <tr>
                            <td><strong>å®é™…åŠŸè€— *</strong></td>
                            <td>åŠŸè€—ï¼ˆç“¦ï¼‰</td>
                            <td>3250</td>
                        </tr>
                        <tr>
                            <td><strong>IPåœ°å€</strong></td>
                            <td>çŸ¿æœºçš„ç½‘ç»œIPåœ°å€ï¼ˆç”¨äºCGMiner APIè¿æ¥ï¼‰</td>
                            <td>192.168.1.100</td>
                        </tr>
                        <tr>
                            <td><strong>æœºæ¶ä½ç½®</strong></td>
                            <td>çŸ¿åœºå†…ç‰©ç†ä½ç½®</td>
                            <td>ç¬¬3æ’ï¼Œç¬¬12æœºæ¶ï¼Œç¬¬5å±‚</td>
                        </tr>
                        <tr>
                            <td><strong>MACåœ°å€</strong></td>
                            <td>ç½‘ç»œMACåœ°å€ç”¨äºè®¾å¤‡è¯†åˆ«</td>
                            <td>AA:BB:CC:DD:EE:FF</td>
                        </tr>
                        <tr>
                            <td><strong>å¤‡æ³¨</strong></td>
                            <td>é™„åŠ ä¿¡æ¯</td>
                            <td>å›ºä»¶ç‰ˆæœ¬v2.1ï¼Œå®šåˆ¶æ•£çƒ­</td>
                        </tr>
                    </tbody>
                </table>
                <p><small class="text-muted">* å¿…å¡«å­—æ®µ</small></p>
            </li>
            <li class="mb-3">
                <strong>æäº¤è¡¨å•</strong>
                <p>ç‚¹å‡»<span class="badge bg-warning text-dark">ä¿å­˜çŸ¿æœº</span>æŒ‰é’®</p>
                <p>çŸ¿åœºç®¡ç†å‘˜ï¼šçŸ¿æœºè‡ªåŠ¨<span class="badge bg-success">å·²æ‰¹å‡†</span></p>
                <p>å®¢æˆ·ï¼šçŸ¿æœºå°†ä»¥<span class="badge bg-info">å¾…å®¡æ ¸</span>çŠ¶æ€æ·»åŠ </p>
            </li>
            <li class="mb-3">
                <strong>å®¡æ‰¹æµç¨‹ï¼ˆå®¢æˆ·æäº¤çš„çŸ¿æœºï¼‰</strong>
                <ul>
                    <li>å®¢æˆ·é€šè¿‡æ·»åŠ çŸ¿æœºè¡¨å•æäº¤ç”³è¯·</li>
                    <li>ç®¡ç†å‘˜å®¡æ ¸å¹¶æ‰¹å‡†/æ‹’ç»è¯·æ±‚</li>
                    <li>å·²æ‰¹å‡†çš„çŸ¿æœºå˜ä¸º<span class="badge bg-success">å·²æ‰¹å‡†</span>çŠ¶æ€å¹¶å¼€å§‹è¿è¥</li>
                </ul>
            </li>
        </ol>
        
        <div class="alert alert-success">
            <i class="bi bi-check-circle-fill me-2"></i>
            <strong>æœ€ä½³å®è·µï¼š</strong>æäº¤å‰ä»”ç»†æ£€æŸ¥åºåˆ—å·å’ŒçŸ¿æœºè§„æ ¼ï¼Œé¿å…é”™è¯¯ã€‚
        </div>
        {% endif %}
    </div>
</div>

<!-- ç« èŠ‚3: æµ‹è¯•è¿æ¥ -->
<div class="hosting-card mb-4" id="section-3">
    <div class="hosting-card-header">
        <h4 class="hosting-card-title">
            <i class="bi bi-3-circle-fill me-2" style="color: #f7931a;"></i>
            {% if current_lang == 'en' %}Testing CGMiner Connection{% else %}æµ‹è¯•CGMinerè¿æ¥{% endif %}
        </h4>
    </div>
    <div class="hosting-card-body">
        {% if current_lang == 'en' %}
        <h5 class="mb-3">Using the Test Connection Button</h5>
        <p>After adding a miner, you should test the CGMiner API connection to ensure proper communication:</p>
        
        <ol class="mb-4">
            <li class="mb-3">
                <strong>Locate the Test Button</strong>
                <p>In the miner list, find the <button class="btn btn-sm btn-info" disabled><i class="bi bi-plug"></i> Test</button> button in the Actions column</p>
                <div class="text-center my-3">
                    <img src="{{ url_for('static', filename='images/guide/test_button_location.svg') }}" 
                         alt="Test Button Location" 
                         class="img-fluid rounded border border-warning"
                         style="max-width: 600px;"
                         onerror="this.style.display='none'">
                </div>
            </li>
            <li class="mb-3">
                <strong>Click Test Connection</strong>
                <p>The system will attempt to connect to the miner's CGMiner API (port 4028)</p>
                <p>Testing typically takes 3-5 seconds</p>
            </li>
            <li class="mb-3">
                <strong>Interpret Results</strong>
                
                <h6 class="mt-3 mb-2">âœ… Success Response:</h6>
                <div class="alert alert-success">
                    <i class="bi bi-check-circle-fill me-2"></i>
                    <strong>Connection Successful</strong>
                    <ul class="mb-0 mt-2">
                        <li>CGMiner API is accessible</li>
                        <li>Real-time data collection will work</li>
                        <li>Temperature, hashrate, and fan speeds are displayed</li>
                    </ul>
                </div>
                
                <h6 class="mt-3 mb-2">âŒ Failure Response:</h6>
                <div class="alert alert-danger">
                    <i class="bi bi-x-circle-fill me-2"></i>
                    <strong>Connection Failed</strong>
                    <p class="mb-2">Common error messages:</p>
                    <ul class="mb-0">
                        <li><code>Connection timeout</code> - Network unreachable or firewall blocking</li>
                        <li><code>Connection refused</code> - CGMiner API not enabled</li>
                        <li><code>Invalid response</code> - Wrong port or incompatible API version</li>
                    </ul>
                </div>
            </li>
        </ol>
        
        <h5 class="mb-3 mt-4">Refresh Real-time Data</h5>
        <p>Once connection is verified, use the <button class="btn btn-sm btn-success" disabled><i class="bi bi-arrow-clockwise"></i> Refresh</button> button to manually fetch latest telemetry data:</p>
        
        <ul class="mb-4">
            <li>Updates temperature, fan speed, hashrate immediately</li>
            <li>Useful for spot-checking miner status</li>
            <li>Complements the automatic 60-second background collection</li>
        </ul>
        
        <div class="alert alert-info">
            <i class="bi bi-lightbulb-fill me-2"></i>
            <strong>Tip:</strong> Test connection immediately after adding a new miner to catch configuration errors early.
        </div>
        
        {% else %}
        <h5 class="mb-3">ä½¿ç”¨æµ‹è¯•è¿æ¥æŒ‰é’®</h5>
        <p>æ·»åŠ çŸ¿æœºåï¼Œæ‚¨åº”è¯¥æµ‹è¯•CGMiner APIè¿æ¥ä»¥ç¡®ä¿æ­£å¸¸é€šä¿¡ï¼š</p>
        
        <ol class="mb-4">
            <li class="mb-3">
                <strong>æ‰¾åˆ°æµ‹è¯•æŒ‰é’®</strong>
                <p>åœ¨çŸ¿æœºåˆ—è¡¨ä¸­ï¼Œåœ¨æ“ä½œåˆ—æ‰¾åˆ°<button class="btn btn-sm btn-info" disabled><i class="bi bi-plug"></i> æµ‹è¯•</button>æŒ‰é’®</p>
                <div class="text-center my-3">
                    <img src="{{ url_for('static', filename='images/guide/test_button_location.svg') }}" 
                         alt="æµ‹è¯•æŒ‰é’®ä½ç½®" 
                         class="img-fluid rounded border border-warning"
                         style="max-width: 600px;"
                         onerror="this.style.display='none'">
                </div>
            </li>
            <li class="mb-3">
                <strong>ç‚¹å‡»æµ‹è¯•è¿æ¥</strong>
                <p>ç³»ç»Ÿå°†å°è¯•è¿æ¥åˆ°çŸ¿æœºçš„CGMiner APIï¼ˆ4028ç«¯å£ï¼‰</p>
                <p>æµ‹è¯•é€šå¸¸éœ€è¦3-5ç§’</p>
            </li>
            <li class="mb-3">
                <strong>è§£è¯»ç»“æœ</strong>
                
                <h6 class="mt-3 mb-2">âœ… æˆåŠŸå“åº”ï¼š</h6>
                <div class="alert alert-success">
                    <i class="bi bi-check-circle-fill me-2"></i>
                    <strong>è¿æ¥æˆåŠŸ</strong>
                    <ul class="mb-0 mt-2">
                        <li>CGMiner APIå¯è®¿é—®</li>
                        <li>å®æ—¶æ•°æ®é‡‡é›†å°†æ­£å¸¸å·¥ä½œ</li>
                        <li>æ˜¾ç¤ºæ¸©åº¦ã€ç®—åŠ›å’Œé£æ‰‡é€Ÿåº¦</li>
                    </ul>
                </div>
                
                <h6 class="mt-3 mb-2">âŒ å¤±è´¥å“åº”ï¼š</h6>
                <div class="alert alert-danger">
                    <i class="bi bi-x-circle-fill me-2"></i>
                    <strong>è¿æ¥å¤±è´¥</strong>
                    <p class="mb-2">å¸¸è§é”™è¯¯æ¶ˆæ¯ï¼š</p>
                    <ul class="mb-0">
                        <li><code>è¿æ¥è¶…æ—¶</code> - ç½‘ç»œä¸å¯è¾¾æˆ–é˜²ç«å¢™é˜»æ­¢</li>
                        <li><code>è¿æ¥è¢«æ‹’ç»</code> - CGMiner APIæœªå¯ç”¨</li>
                        <li><code>æ— æ•ˆå“åº”</code> - ç«¯å£é”™è¯¯æˆ–APIç‰ˆæœ¬ä¸å…¼å®¹</li>
                    </ul>
                </div>
            </li>
        </ol>
        
        <h5 class="mb-3 mt-4">åˆ·æ–°å®æ—¶æ•°æ®</h5>
        <p>è¿æ¥éªŒè¯åï¼Œä½¿ç”¨<button class="btn btn-sm btn-success" disabled><i class="bi bi-arrow-clockwise"></i> åˆ·æ–°</button>æŒ‰é’®æ‰‹åŠ¨è·å–æœ€æ–°é¥æµ‹æ•°æ®ï¼š</p>
        
        <ul class="mb-4">
            <li>ç«‹å³æ›´æ–°æ¸©åº¦ã€é£æ‰‡é€Ÿåº¦ã€ç®—åŠ›</li>
            <li>ç”¨äºç°åœºæ£€æŸ¥çŸ¿æœºçŠ¶æ€</li>
            <li>è¡¥å……è‡ªåŠ¨60ç§’åå°é‡‡é›†</li>
        </ul>
        
        <div class="alert alert-info">
            <i class="bi bi-lightbulb-fill me-2"></i>
            <strong>æç¤ºï¼š</strong>æ·»åŠ æ–°çŸ¿æœºåç«‹å³æµ‹è¯•è¿æ¥ï¼Œä»¥ä¾¿å°½æ—©å‘ç°é…ç½®é”™è¯¯ã€‚
        </div>
        {% endif %}
    </div>
</div>

<!-- ç« èŠ‚4: æŸ¥çœ‹å®æ—¶æ•°æ® -->
<div class="hosting-card mb-4" id="section-4">
    <div class="hosting-card-header">
        <h4 class="hosting-card-title">
            <i class="bi bi-4-circle-fill me-2" style="color: #f7931a;"></i>
            {% if current_lang == 'en' %}Viewing Real-time Monitoring Data{% else %}æŸ¥çœ‹å®æ—¶ç›‘æ§æ•°æ®{% endif %}
        </h4>
    </div>
    <div class="hosting-card-body">
        {% if current_lang == 'en' %}
        <h5 class="mb-3">14 Real-time Telemetry Fields</h5>
        <p>The system automatically collects comprehensive telemetry data every 60 seconds:</p>
        
        <table class="table table-bordered table-dark">
            <thead>
                <tr>
                    <th>Field</th>
                    <th>Description</th>
                    <th>Example</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Temperature Avg</strong></td>
                    <td>Average chip temperature (Â°C)</td>
                    <td>78.5Â°C</td>
                </tr>
                <tr>
                    <td><strong>Temperature Max</strong></td>
                    <td>Highest chip temperature (Â°C)</td>
                    <td>82.0Â°C</td>
                </tr>
                <tr>
                    <td><strong>Fan Speeds</strong></td>
                    <td>Array of all fan RPM values</td>
                    <td>[3600, 3650, 3580]</td>
                </tr>
                <tr>
                    <td><strong>Fan Avg</strong></td>
                    <td>Average fan speed (RPM)</td>
                    <td>3610 RPM</td>
                </tr>
                <tr>
                    <td><strong>Reject Rate</strong></td>
                    <td>Percentage of rejected shares (%)</td>
                    <td>0.5%</td>
                </tr>
                <tr>
                    <td><strong>Hardware Errors</strong></td>
                    <td>Count of hardware errors</td>
                    <td>0</td>
                </tr>
                <tr>
                    <td><strong>CGMiner Online</strong></td>
                    <td>Connection status (boolean)</td>
                    <td>âœ… Online</td>
                </tr>
                <tr>
                    <td><strong>Pool URL</strong></td>
                    <td>Mining pool address</td>
                    <td>stratum+tcp://pool.example.com:3333</td>
                </tr>
                <tr>
                    <td><strong>Pool Worker</strong></td>
                    <td>Worker name/username</td>
                    <td>worker123</td>
                </tr>
                <tr>
                    <td><strong>Uptime (seconds)</strong></td>
                    <td>Continuous running time</td>
                    <td>86400 (1 day)</td>
                </tr>
                <tr>
                    <td><strong>Hashrate 5s</strong></td>
                    <td>5-second average hashrate (TH/s)</td>
                    <td>110.5 TH/s</td>
                </tr>
                <tr>
                    <td><strong>Accepted Shares</strong></td>
                    <td>Total accepted shares</td>
                    <td>15,234</td>
                </tr>
                <tr>
                    <td><strong>Rejected Shares</strong></td>
                    <td>Total rejected shares</td>
                    <td>78</td>
                </tr>
                <tr>
                    <td><strong>Last Seen</strong></td>
                    <td>UTC timestamp of last update</td>
                    <td>2024-11-14 14:30:00 UTC</td>
                </tr>
            </tbody>
        </table>
        
        <h5 class="mb-3 mt-4">Miner Detail Page - 24-Hour Trends</h5>
        <p>Click on any miner's serial number to view detailed analytics:</p>
        
        <ul class="mb-4">
            <li><strong>Dual-axis Chart (Chart.js v4.4.0):</strong>
                <ul>
                    <li>Left axis: Hashrate (TH/s) in blue</li>
                    <li>Right axis: Temperature (Â°C) in orange</li>
                    <li>24-hour historical trend</li>
                </ul>
            </li>
            <li><strong>Performance Metrics:</strong>
                <ul>
                    <li>Average/Min/Max values</li>
                    <li>Efficiency indicators</li>
                    <li>Abnormal event markers</li>
                </ul>
            </li>
        </ul>
        
        <div class="text-center mb-3">
            <img src="{{ url_for('static', filename='images/guide/miner_detail_chart.svg') }}" 
                 alt="24-hour Trend Chart" 
                 class="img-fluid rounded border border-warning"
                 style="max-width: 700px;"
                 onerror="this.style.display='none'">
        </div>
        
        <div class="alert alert-info">
            <i class="bi bi-graph-up me-2"></i>
            <strong>Auto Refresh:</strong> Background scheduler updates all miners every 60 seconds automatically. No manual intervention required.
        </div>
        
        {% else %}
        <h5 class="mb-3">14ä¸ªå®æ—¶é¥æµ‹å­—æ®µ</h5>
        <p>ç³»ç»Ÿæ¯60ç§’è‡ªåŠ¨æ”¶é›†å…¨é¢çš„é¥æµ‹æ•°æ®ï¼š</p>
        
        <table class="table table-bordered table-dark">
            <thead>
                <tr>
                    <th>å­—æ®µ</th>
                    <th>è¯´æ˜</th>
                    <th>ç¤ºä¾‹</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>å¹³å‡æ¸©åº¦</strong></td>
                    <td>å¹³å‡èŠ¯ç‰‡æ¸©åº¦ï¼ˆÂ°Cï¼‰</td>
                    <td>78.5Â°C</td>
                </tr>
                <tr>
                    <td><strong>æœ€é«˜æ¸©åº¦</strong></td>
                    <td>æœ€é«˜èŠ¯ç‰‡æ¸©åº¦ï¼ˆÂ°Cï¼‰</td>
                    <td>82.0Â°C</td>
                </tr>
                <tr>
                    <td><strong>é£æ‰‡é€Ÿåº¦</strong></td>
                    <td>æ‰€æœ‰é£æ‰‡è½¬é€Ÿå€¼æ•°ç»„</td>
                    <td>[3600, 3650, 3580]</td>
                </tr>
                <tr>
                    <td><strong>å¹³å‡é£æ‰‡</strong></td>
                    <td>å¹³å‡é£æ‰‡é€Ÿåº¦ï¼ˆRPMï¼‰</td>
                    <td>3610 RPM</td>
                </tr>
                <tr>
                    <td><strong>æ‹’ç»ç‡</strong></td>
                    <td>è¢«æ‹’ç»ä»½é¢çš„ç™¾åˆ†æ¯”ï¼ˆ%ï¼‰</td>
                    <td>0.5%</td>
                </tr>
                <tr>
                    <td><strong>ç¡¬ä»¶é”™è¯¯</strong></td>
                    <td>ç¡¬ä»¶é”™è¯¯è®¡æ•°</td>
                    <td>0</td>
                </tr>
                <tr>
                    <td><strong>CGMineråœ¨çº¿</strong></td>
                    <td>è¿æ¥çŠ¶æ€ï¼ˆå¸ƒå°”å€¼ï¼‰</td>
                    <td>âœ… åœ¨çº¿</td>
                </tr>
                <tr>
                    <td><strong>çŸ¿æ± URL</strong></td>
                    <td>çŸ¿æ± åœ°å€</td>
                    <td>stratum+tcp://pool.example.com:3333</td>
                </tr>
                <tr>
                    <td><strong>çŸ¿æ± å·¥äºº</strong></td>
                    <td>å·¥äººåç§°/ç”¨æˆ·å</td>
                    <td>worker123</td>
                </tr>
                <tr>
                    <td><strong>è¿è¡Œæ—¶é—´ï¼ˆç§’ï¼‰</strong></td>
                    <td>è¿ç»­è¿è¡Œæ—¶é—´</td>
                    <td>86400ï¼ˆ1å¤©ï¼‰</td>
                </tr>
                <tr>
                    <td><strong>ç®—åŠ›5ç§’</strong></td>
                    <td>5ç§’å¹³å‡ç®—åŠ›ï¼ˆTH/sï¼‰</td>
                    <td>110.5 TH/s</td>
                </tr>
                <tr>
                    <td><strong>æ¥å—ä»½é¢</strong></td>
                    <td>æ€»æ¥å—ä»½é¢</td>
                    <td>15,234</td>
                </tr>
                <tr>
                    <td><strong>æ‹’ç»ä»½é¢</strong></td>
                    <td>æ€»æ‹’ç»ä»½é¢</td>
                    <td>78</td>
                </tr>
                <tr>
                    <td><strong>æœ€åé€šä¿¡</strong></td>
                    <td>æœ€åæ›´æ–°çš„UTCæ—¶é—´æˆ³</td>
                    <td>2024-11-14 14:30:00 UTC</td>
                </tr>
            </tbody>
        </table>
        
        <h5 class="mb-3 mt-4">çŸ¿æœºè¯¦æƒ…é¡µ - 24å°æ—¶è¶‹åŠ¿</h5>
        <p>ç‚¹å‡»ä»»ä½•çŸ¿æœºçš„åºåˆ—å·æŸ¥çœ‹è¯¦ç»†åˆ†æï¼š</p>
        
        <ul class="mb-4">
            <li><strong>åŒè½´å›¾è¡¨ï¼ˆChart.js v4.4.0ï¼‰ï¼š</strong>
                <ul>
                    <li>å·¦è½´ï¼šç®—åŠ›ï¼ˆTH/sï¼‰è“è‰²</li>
                    <li>å³è½´ï¼šæ¸©åº¦ï¼ˆÂ°Cï¼‰æ©™è‰²</li>
                    <li>24å°æ—¶å†å²è¶‹åŠ¿</li>
                </ul>
            </li>
            <li><strong>æ€§èƒ½æŒ‡æ ‡ï¼š</strong>
                <ul>
                    <li>å¹³å‡/æœ€å°/æœ€å¤§å€¼</li>
                    <li>æ•ˆç‡æŒ‡æ ‡</li>
                    <li>å¼‚å¸¸äº‹ä»¶æ ‡è®°</li>
                </ul>
            </li>
        </ul>
        
        <div class="text-center mb-3">
            <img src="{{ url_for('static', filename='images/guide/miner_detail_chart.svg') }}" 
                 alt="24å°æ—¶è¶‹åŠ¿å›¾" 
                 class="img-fluid rounded border border-warning"
                 style="max-width: 700px;"
                 onerror="this.style.display='none'">
        </div>
        
        <div class="alert alert-info">
            <i class="bi bi-graph-up me-2"></i>
            <strong>è‡ªåŠ¨åˆ·æ–°ï¼š</strong>åå°è°ƒåº¦ç¨‹åºæ¯60ç§’è‡ªåŠ¨æ›´æ–°æ‰€æœ‰çŸ¿æœºã€‚æ— éœ€æ‰‹åŠ¨å¹²é¢„ã€‚
        </div>
        {% endif %}
    </div>
</div>

<!-- ç« èŠ‚5: å‘Šè­¦ç³»ç»Ÿ -->
<div class="hosting-card mb-4" id="section-5">
    <div class="hosting-card-header">
        <h4 class="hosting-card-title">
            <i class="bi bi-5-circle-fill me-2" style="color: #f7931a;"></i>
            {% if current_lang == 'en' %}Smart Alert System{% else %}æ™ºèƒ½å‘Šè­¦ç³»ç»Ÿ{% endif %}
        </h4>
    </div>
    <div class="hosting-card-body">
        {% if current_lang == 'en' %}
        <h5 class="mb-3">Alert Thresholds and Badge Colors</h5>
        <p>The system automatically detects critical issues and displays color-coded badges:</p>
        
        <table class="table table-bordered table-dark">
            <thead>
                <tr>
                    <th>Alert Type</th>
                    <th>Threshold</th>
                    <th>Severity</th>
                    <th>Badge</th>
                    <th>Recommended Action</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>High Temperature (Critical)</strong></td>
                    <td>&gt; 90Â°C</td>
                    <td><span class="badge bg-danger">Critical</span></td>
                    <td><span class="badge bg-danger">ğŸ”¥ 90.5Â°C</span></td>
                    <td>
                        <ul class="mb-0">
                            <li>Check cooling system immediately</li>
                            <li>Verify fan operation</li>
                            <li>Consider reducing power or shutdown</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td><strong>High Temperature (Warning)</strong></td>
                    <td>&gt; 85Â°C</td>
                    <td><span class="badge bg-warning text-dark">Warning</span></td>
                    <td><span class="badge bg-warning text-dark">âš ï¸ 87.2Â°C</span></td>
                    <td>
                        <ul class="mb-0">
                            <li>Monitor closely</li>
                            <li>Improve ventilation</li>
                            <li>Clean dust filters</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td><strong>Hashrate Drop</strong></td>
                    <td>&gt; 20% below expected</td>
                    <td><span class="badge bg-warning text-dark">Warning</span></td>
                    <td><span class="badge bg-warning text-dark">ğŸ“‰ -25%</span></td>
                    <td>
                        <ul class="mb-0">
                            <li>Check for hardware errors</li>
                            <li>Verify pool connection</li>
                            <li>Inspect hashboards</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td><strong>Offline (Extended)</strong></td>
                    <td>&gt; 5 minutes</td>
                    <td><span class="badge bg-danger">Critical</span></td>
                    <td><span class="badge bg-danger">ğŸ”Œ Offline 12m</span></td>
                    <td>
                        <ul class="mb-0">
                            <li>Check power supply</li>
                            <li>Verify network connectivity</li>
                            <li>Physical inspection required</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td><strong>Never Online</strong></td>
                    <td>No last_seen timestamp</td>
                    <td><span class="badge bg-danger">Critical</span></td>
                    <td><span class="badge bg-danger">âŒ Never Online</span></td>
                    <td>
                        <ul class="mb-0">
                            <li>Verify IP address configuration</li>
                            <li>Check CGMiner API enabled</li>
                            <li>Test network connectivity</li>
                        </ul>
                    </td>
                </tr>
            </tbody>
        </table>
        
        <h5 class="mb-3 mt-4">Alert Badge Display</h5>
        <div class="text-center mb-3">
            <img src="{{ url_for('static', filename='images/guide/alert_badges.svg') }}" 
                 alt="Alert Badge Examples" 
                 class="img-fluid rounded border border-warning"
                 style="max-width: 600px;"
                 onerror="this.style.display='none'">
        </div>
        
        <p>Badges appear in the miner list with hover tooltips showing all active alerts:</p>
        <ul class="mb-4">
            <li><strong>Red badges:</strong> Require immediate attention</li>
            <li><strong>Yellow badges:</strong> Monitor and plan maintenance</li>
            <li><strong>Count indicator:</strong> Shows total number of alerts</li>
            <li><strong>Hover tooltip:</strong> Lists all alert details</li>
        </ul>
        
        <div class="alert alert-warning">
            <i class="bi bi-bell-fill me-2"></i>
            <strong>Important:</strong> Address critical (red) alerts within 1 hour to prevent equipment damage or extended downtime.
        </div>
        
        {% else %}
        <h5 class="mb-3">å‘Šè­¦é˜ˆå€¼å’Œå¾½ç« é¢œè‰²</h5>
        <p>ç³»ç»Ÿè‡ªåŠ¨æ£€æµ‹å…³é”®é—®é¢˜å¹¶æ˜¾ç¤ºé¢œè‰²ç¼–ç çš„å¾½ç« ï¼š</p>
        
        <table class="table table-bordered table-dark">
            <thead>
                <tr>
                    <th>å‘Šè­¦ç±»å‹</th>
                    <th>é˜ˆå€¼</th>
                    <th>ä¸¥é‡æ€§</th>
                    <th>å¾½ç« </th>
                    <th>å»ºè®®æ“ä½œ</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>é«˜æ¸©ï¼ˆä¸¥é‡ï¼‰</strong></td>
                    <td>&gt; 90Â°C</td>
                    <td><span class="badge bg-danger">ä¸¥é‡</span></td>
                    <td><span class="badge bg-danger">ğŸ”¥ 90.5Â°C</span></td>
                    <td>
                        <ul class="mb-0">
                            <li>ç«‹å³æ£€æŸ¥å†·å´ç³»ç»Ÿ</li>
                            <li>éªŒè¯é£æ‰‡è¿è¡Œ</li>
                            <li>è€ƒè™‘é™ä½åŠŸè€—æˆ–å…³æœº</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td><strong>é«˜æ¸©ï¼ˆè­¦å‘Šï¼‰</strong></td>
                    <td>&gt; 85Â°C</td>
                    <td><span class="badge bg-warning text-dark">è­¦å‘Š</span></td>
                    <td><span class="badge bg-warning text-dark">âš ï¸ 87.2Â°C</span></td>
                    <td>
                        <ul class="mb-0">
                            <li>å¯†åˆ‡ç›‘æ§</li>
                            <li>æ”¹å–„é€šé£</li>
                            <li>æ¸…æ´é˜²å°˜è¿‡æ»¤å™¨</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td><strong>ç®—åŠ›ä¸‹é™</strong></td>
                    <td>&gt; ä½äºé¢„æœŸ20%</td>
                    <td><span class="badge bg-warning text-dark">è­¦å‘Š</span></td>
                    <td><span class="badge bg-warning text-dark">ğŸ“‰ -25%</span></td>
                    <td>
                        <ul class="mb-0">
                            <li>æ£€æŸ¥ç¡¬ä»¶é”™è¯¯</li>
                            <li>éªŒè¯çŸ¿æ± è¿æ¥</li>
                            <li>æ£€æŸ¥ç®—åŠ›æ¿</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td><strong>ç¦»çº¿ï¼ˆå»¶é•¿ï¼‰</strong></td>
                    <td>&gt; 5åˆ†é’Ÿ</td>
                    <td><span class="badge bg-danger">ä¸¥é‡</span></td>
                    <td><span class="badge bg-danger">ğŸ”Œ ç¦»çº¿12åˆ†é’Ÿ</span></td>
                    <td>
                        <ul class="mb-0">
                            <li>æ£€æŸ¥ç”µæº</li>
                            <li>éªŒè¯ç½‘ç»œè¿æ¥</li>
                            <li>éœ€è¦ç‰©ç†æ£€æŸ¥</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td><strong>ä»æœªåœ¨çº¿</strong></td>
                    <td>æ— last_seenæ—¶é—´æˆ³</td>
                    <td><span class="badge bg-danger">ä¸¥é‡</span></td>
                    <td><span class="badge bg-danger">âŒ ä»æœªåœ¨çº¿</span></td>
                    <td>
                        <ul class="mb-0">
                            <li>éªŒè¯IPåœ°å€é…ç½®</li>
                            <li>æ£€æŸ¥CGMiner APIå·²å¯ç”¨</li>
                            <li>æµ‹è¯•ç½‘ç»œè¿æ¥</li>
                        </ul>
                    </td>
                </tr>
            </tbody>
        </table>
        
        <h5 class="mb-3 mt-4">å‘Šè­¦å¾½ç« æ˜¾ç¤º</h5>
        <div class="text-center mb-3">
            <img src="{{ url_for('static', filename='images/guide/alert_badges.svg') }}" 
                 alt="å‘Šè­¦å¾½ç« ç¤ºä¾‹" 
                 class="img-fluid rounded border border-warning"
                 style="max-width: 600px;"
                 onerror="this.style.display='none'">
        </div>
        
        <p>å¾½ç« æ˜¾ç¤ºåœ¨çŸ¿æœºåˆ—è¡¨ä¸­ï¼Œæ‚¬åœæ—¶æ˜¾ç¤ºæ‰€æœ‰æ´»åŠ¨å‘Šè­¦çš„å·¥å…·æç¤ºï¼š</p>
        <ul class="mb-4">
            <li><strong>çº¢è‰²å¾½ç« ï¼š</strong>éœ€è¦ç«‹å³å…³æ³¨</li>
            <li><strong>é»„è‰²å¾½ç« ï¼š</strong>ç›‘æ§å¹¶è®¡åˆ’ç»´æŠ¤</li>
            <li><strong>è®¡æ•°æŒ‡ç¤ºå™¨ï¼š</strong>æ˜¾ç¤ºå‘Šè­¦æ€»æ•°</li>
            <li><strong>æ‚¬åœæç¤ºï¼š</strong>åˆ—å‡ºæ‰€æœ‰å‘Šè­¦è¯¦æƒ…</li>
        </ul>
        
        <div class="alert alert-warning">
            <i class="bi bi-bell-fill me-2"></i>
            <strong>é‡è¦ï¼š</strong>åœ¨1å°æ—¶å†…å¤„ç†ä¸¥é‡ï¼ˆçº¢è‰²ï¼‰å‘Šè­¦ï¼Œä»¥é˜²æ­¢è®¾å¤‡æŸåæˆ–å»¶é•¿åœæœºæ—¶é—´ã€‚
        </div>
        {% endif %}
    </div>
</div>

<!-- ç« èŠ‚6: æ•…éšœæ’æŸ¥ -->
<div class="hosting-card mb-4" id="section-6">
    <div class="hosting-card-header">
        <h4 class="hosting-card-title">
            <i class="bi bi-6-circle-fill me-2" style="color: #f7931a;"></i>
            {% if current_lang == 'en' %}Troubleshooting Guide{% else %}æ•…éšœæ’æŸ¥æŒ‡å—{% endif %}
        </h4>
    </div>
    <div class="hosting-card-body">
        {% if current_lang == 'en' %}
        <h5 class="mb-3">Common Issues and Solutions</h5>
        
        <div class="accordion" id="troubleshootingAccordion">
            <div class="accordion-item bg-dark">
                <h2 class="accordion-header" id="heading1">
                    <button class="accordion-button bg-dark text-light" type="button" data-bs-toggle="collapse" data-bs-target="#collapse1">
                        <i class="bi bi-x-circle text-danger me-2"></i>
                        <strong>Connection Timeout / Failed to Connect</strong>
                    </button>
                </h2>
                <div id="collapse1" class="accordion-collapse collapse show" data-bs-parent="#troubleshootingAccordion">
                    <div class="accordion-body">
                        <p><strong>Symptoms:</strong> Test connection fails with timeout error</p>
                        <p><strong>Possible Causes & Solutions:</strong></p>
                        <ol>
                            <li class="mb-2">
                                <strong>Network Connectivity</strong>
                                <ul>
                                    <li>Ping the miner IP: <code>ping 192.168.1.100</code></li>
                                    <li>Check physical network cable connection</li>
                                    <li>Verify switch/router configuration</li>
                                </ul>
                            </li>
                            <li class="mb-2">
                                <strong>Firewall Blocking</strong>
                                <ul>
                                    <li>Check firewall rules on both miner and management system</li>
                                    <li>Temporarily disable firewall to test: <code>ufw disable</code> (Ubuntu)</li>
                                    <li>Allow port 4028: <code>ufw allow 4028/tcp</code></li>
                                </ul>
                            </li>
                            <li class="mb-2">
                                <strong>Incorrect IP Address</strong>
                                <ul>
                                    <li>Verify IP address in miner web interface</li>
                                    <li>Check for IP conflicts: <code>arp -a</code></li>
                                    <li>Update IP in system if changed</li>
                                </ul>
                            </li>
                        </ol>
                    </div>
                </div>
            </div>
            
            <div class="accordion-item bg-dark">
                <h2 class="accordion-header" id="heading2">
                    <button class="accordion-button collapsed bg-dark text-light" type="button" data-bs-toggle="collapse" data-bs-target="#collapse2">
                        <i class="bi bi-exclamation-triangle text-warning me-2"></i>
                        <strong>CGMiner API Not Responding</strong>
                    </button>
                </h2>
                <div id="collapse2" class="accordion-collapse collapse" data-bs-parent="#troubleshootingAccordion">
                    <div class="accordion-body">
                        <p><strong>Symptoms:</strong> Connection refused or invalid response</p>
                        <p><strong>Solutions:</strong></p>
                        <ol>
                            <li class="mb-2">
                                <strong>Verify API is Enabled</strong>
                                <ul>
                                    <li>Login to miner web interface</li>
                                    <li>Check <code>Miner Configuration</code> â†’ <code>API Settings</code></li>
                                    <li>Ensure API is enabled and port is 4028</li>
                                </ul>
                            </li>
                            <li class="mb-2">
                                <strong>Restart CGMiner Service</strong>
                                <ul>
                                    <li>Reboot the miner from web interface</li>
                                    <li>Or SSH and restart: <code>systemctl restart cgminer</code></li>
                                </ul>
                            </li>
                            <li class="mb-2">
                                <strong>Test Manually</strong>
                                <ul>
                                    <li>Use telnet: <code>telnet 192.168.1.100 4028</code></li>
                                    <li>Send command: <code>{"command":"summary"}</code></li>
                                    <li>Should receive JSON response</li>
                                </ul>
                            </li>
                        </ol>
                    </div>
                </div>
            </div>
            
            <div class="accordion-item bg-dark">
                <h2 class="accordion-header" id="heading3">
                    <button class="accordion-button collapsed bg-dark text-light" type="button" data-bs-toggle="collapse" data-bs-target="#collapse3">
                        <i class="bi bi-arrow-clockwise text-info me-2"></i>
                        <strong>Real-time Data Not Updating</strong>
                    </button>
                </h2>
                <div id="collapse3" class="accordion-collapse collapse" data-bs-parent="#troubleshootingAccordion">
                    <div class="accordion-body">
                        <p><strong>Symptoms:</strong> Last seen timestamp is old, data appears stale</p>
                        <p><strong>Solutions:</strong></p>
                        <ol>
                            <li class="mb-2">
                                <strong>Check Background Scheduler</strong>
                                <ul>
                                    <li>Verify scheduler is running in application logs</li>
                                    <li>Look for: <code>CGMinerè°ƒåº¦å™¨å¯åŠ¨æˆåŠŸ</code></li>
                                    <li>Restart application if scheduler stopped</li>
                                </ul>
                            </li>
                            <li class="mb-2">
                                <strong>Manual Refresh</strong>
                                <ul>
                                    <li>Click the <button class="btn btn-sm btn-success" disabled><i class="bi bi-arrow-clockwise"></i> Refresh</button> button</li>
                                    <li>Verifies if real-time collection works</li>
                                </ul>
                            </li>
                            <li class="mb-2">
                                <strong>Check Database Connection</strong>
                                <ul>
                                    <li>Verify PostgreSQL is running</li>
                                    <li>Check connection pool status</li>
                                    <li>Review database logs for errors</li>
                                </ul>
                            </li>
                        </ol>
                    </div>
                </div>
            </div>
            
            <div class="accordion-item bg-dark">
                <h2 class="accordion-header" id="heading4">
                    <button class="accordion-button collapsed bg-dark text-light" type="button" data-bs-toggle="collapse" data-bs-target="#collapse4">
                        <i class="bi bi-shield-lock text-warning me-2"></i>
                        <strong>Permission Denied / Access Restricted</strong>
                    </button>
                </h2>
                <div id="collapse4" class="accordion-collapse collapse" data-bs-parent="#troubleshootingAccordion">
                    <div class="accordion-body">
                        <p><strong>Symptoms:</strong> Cannot view certain miners or access features</p>
                        <p><strong>Solutions:</strong></p>
                        <ol>
                            <li class="mb-2">
                                <strong>Check User Role</strong>
                                <ul>
                                    <li><strong>customer</strong> - Can only view own miners</li>
                                    <li><strong>mining_site</strong> - Can view all miners at their sites</li>
                                    <li><strong>admin/owner</strong> - Full access to all miners</li>
                                </ul>
                            </li>
                            <li class="mb-2">
                                <strong>Verify Customer Assignment</strong>
                                <ul>
                                    <li>Ensure miner.customer_id matches logged-in user</li>
                                    <li>Contact admin to update assignments if needed</li>
                                </ul>
                            </li>
                            <li class="mb-2">
                                <strong>Session Issues</strong>
                                <ul>
                                    <li>Logout and login again</li>
                                    <li>Clear browser cookies</li>
                                    <li>Check session timeout settings</li>
                                </ul>
                            </li>
                        </ol>
                    </div>
                </div>
            </div>
            
            <div class="accordion-item bg-dark">
                <h2 class="accordion-header" id="heading5">
                    <button class="accordion-button collapsed bg-dark text-light" type="button" data-bs-toggle="collapse" data-bs-target="#collapse5">
                        <i class="bi bi-thermometer-high text-danger me-2"></i>
                        <strong>False Temperature Alerts</strong>
                    </button>
                </h2>
                <div id="collapse5" class="accordion-collapse collapse" data-bs-parent="#troubleshootingAccordion">
                    <div class="accordion-body">
                        <p><strong>Symptoms:</strong> Temperature alerts showing when miner is cool</p>
                        <p><strong>Solutions:</strong></p>
                        <ol>
                            <li class="mb-2">
                                <strong>Verify Sensor Readings</strong>
                                <ul>
                                    <li>Check miner web interface for actual temperature</li>
                                    <li>Compare with CGMiner API response</li>
                                    <li>Sensor malfunction may require RMA</li>
                                </ul>
                            </li>
                            <li class="mb-2">
                                <strong>Update Firmware</strong>
                                <ul>
                                    <li>Check manufacturer for firmware updates</li>
                                    <li>Newer firmware may fix sensor bugs</li>
                                </ul>
                            </li>
                            <li class="mb-2">
                                <strong>Adjust Alert Thresholds</strong>
                                <ul>
                                    <li>Contact system administrator</li>
                                    <li>Request threshold adjustment if necessary</li>
                                    <li>Document legitimate false positives</li>
                                </ul>
                            </li>
                        </ol>
                    </div>
                </div>
            </div>
        </div>
        
        <h5 class="mb-3 mt-5">Getting Additional Help</h5>
        <div class="alert alert-info">
            <i class="bi bi-question-circle-fill me-2"></i>
            <strong>Still having issues?</strong>
            <ul class="mb-0 mt-2">
                <li>Contact technical support with specific error messages</li>
                <li>Include miner serial number and IP address</li>
                <li>Attach screenshots if possible</li>
                <li>Describe steps already attempted</li>
            </ul>
        </div>
        
        {% else %}
        <h5 class="mb-3">å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ</h5>
        
        <div class="accordion" id="troubleshootingAccordion">
            <div class="accordion-item bg-dark">
                <h2 class="accordion-header" id="heading1">
                    <button class="accordion-button bg-dark text-light" type="button" data-bs-toggle="collapse" data-bs-target="#collapse1">
                        <i class="bi bi-x-circle text-danger me-2"></i>
                        <strong>è¿æ¥è¶…æ—¶ / æ— æ³•è¿æ¥</strong>
                    </button>
                </h2>
                <div id="collapse1" class="accordion-collapse collapse show" data-bs-parent="#troubleshootingAccordion">
                    <div class="accordion-body">
                        <p><strong>ç—‡çŠ¶ï¼š</strong>æµ‹è¯•è¿æ¥å¤±è´¥ï¼Œæ˜¾ç¤ºè¶…æ—¶é”™è¯¯</p>
                        <p><strong>å¯èƒ½åŸå› å’Œè§£å†³æ–¹æ¡ˆï¼š</strong></p>
                        <ol>
                            <li class="mb-2">
                                <strong>ç½‘ç»œè¿æ¥æ€§</strong>
                                <ul>
                                    <li>PingçŸ¿æœºIPï¼š<code>ping 192.168.1.100</code></li>
                                    <li>æ£€æŸ¥ç‰©ç†ç½‘ç»œç”µç¼†è¿æ¥</li>
                                    <li>éªŒè¯äº¤æ¢æœº/è·¯ç”±å™¨é…ç½®</li>
                                </ul>
                            </li>
                            <li class="mb-2">
                                <strong>é˜²ç«å¢™é˜»æ­¢</strong>
                                <ul>
                                    <li>æ£€æŸ¥çŸ¿æœºå’Œç®¡ç†ç³»ç»Ÿä¸Šçš„é˜²ç«å¢™è§„åˆ™</li>
                                    <li>ä¸´æ—¶ç¦ç”¨é˜²ç«å¢™æµ‹è¯•ï¼š<code>ufw disable</code>ï¼ˆUbuntuï¼‰</li>
                                    <li>å…è®¸4028ç«¯å£ï¼š<code>ufw allow 4028/tcp</code></li>
                                </ul>
                            </li>
                            <li class="mb-2">
                                <strong>IPåœ°å€é”™è¯¯</strong>
                                <ul>
                                    <li>åœ¨çŸ¿æœºWebç•Œé¢ä¸­éªŒè¯IPåœ°å€</li>
                                    <li>æ£€æŸ¥IPå†²çªï¼š<code>arp -a</code></li>
                                    <li>å¦‚å·²æ›´æ”¹ï¼Œåœ¨ç³»ç»Ÿä¸­æ›´æ–°IP</li>
                                </ul>
                            </li>
                        </ol>
                    </div>
                </div>
            </div>
            
            <div class="accordion-item bg-dark">
                <h2 class="accordion-header" id="heading2">
                    <button class="accordion-button collapsed bg-dark text-light" type="button" data-bs-toggle="collapse" data-bs-target="#collapse2">
                        <i class="bi bi-exclamation-triangle text-warning me-2"></i>
                        <strong>CGMiner APIæ— å“åº”</strong>
                    </button>
                </h2>
                <div id="collapse2" class="accordion-collapse collapse" data-bs-parent="#troubleshootingAccordion">
                    <div class="accordion-body">
                        <p><strong>ç—‡çŠ¶ï¼š</strong>è¿æ¥è¢«æ‹’ç»æˆ–æ— æ•ˆå“åº”</p>
                        <p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
                        <ol>
                            <li class="mb-2">
                                <strong>éªŒè¯APIå·²å¯ç”¨</strong>
                                <ul>
                                    <li>ç™»å½•çŸ¿æœºWebç•Œé¢</li>
                                    <li>æ£€æŸ¥<code>çŸ¿æœºé…ç½®</code> â†’ <code>APIè®¾ç½®</code></li>
                                    <li>ç¡®ä¿APIå·²å¯ç”¨ä¸”ç«¯å£ä¸º4028</li>
                                </ul>
                            </li>
                            <li class="mb-2">
                                <strong>é‡å¯CGMineræœåŠ¡</strong>
                                <ul>
                                    <li>ä»Webç•Œé¢é‡å¯çŸ¿æœº</li>
                                    <li>æˆ–SSHå¹¶é‡å¯ï¼š<code>systemctl restart cgminer</code></li>
                                </ul>
                            </li>
                            <li class="mb-2">
                                <strong>æ‰‹åŠ¨æµ‹è¯•</strong>
                                <ul>
                                    <li>ä½¿ç”¨telnetï¼š<code>telnet 192.168.1.100 4028</code></li>
                                    <li>å‘é€å‘½ä»¤ï¼š<code>{"command":"summary"}</code></li>
                                    <li>åº”æ¥æ”¶JSONå“åº”</li>
                                </ul>
                            </li>
                        </ol>
                    </div>
                </div>
            </div>
            
            <div class="accordion-item bg-dark">
                <h2 class="accordion-header" id="heading3">
                    <button class="accordion-button collapsed bg-dark text-light" type="button" data-bs-toggle="collapse" data-bs-target="#collapse3">
                        <i class="bi bi-arrow-clockwise text-info me-2"></i>
                        <strong>å®æ—¶æ•°æ®æœªæ›´æ–°</strong>
                    </button>
                </h2>
                <div id="collapse3" class="accordion-collapse collapse" data-bs-parent="#troubleshootingAccordion">
                    <div class="accordion-body">
                        <p><strong>ç—‡çŠ¶ï¼š</strong>æœ€åé€šä¿¡æ—¶é—´æˆ³è¾ƒæ—§ï¼Œæ•°æ®çœ‹èµ·æ¥é™ˆæ—§</p>
                        <p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
                        <ol>
                            <li class="mb-2">
                                <strong>æ£€æŸ¥åå°è°ƒåº¦å™¨</strong>
                                <ul>
                                    <li>åœ¨åº”ç”¨ç¨‹åºæ—¥å¿—ä¸­éªŒè¯è°ƒåº¦å™¨æ­£åœ¨è¿è¡Œ</li>
                                    <li>æŸ¥æ‰¾ï¼š<code>CGMinerè°ƒåº¦å™¨å¯åŠ¨æˆåŠŸ</code></li>
                                    <li>å¦‚è°ƒåº¦å™¨åœæ­¢åˆ™é‡å¯åº”ç”¨ç¨‹åº</li>
                                </ul>
                            </li>
                            <li class="mb-2">
                                <strong>æ‰‹åŠ¨åˆ·æ–°</strong>
                                <ul>
                                    <li>ç‚¹å‡»<button class="btn btn-sm btn-success" disabled><i class="bi bi-arrow-clockwise"></i> åˆ·æ–°</button>æŒ‰é’®</li>
                                    <li>éªŒè¯å®æ—¶é‡‡é›†æ˜¯å¦å·¥ä½œ</li>
                                </ul>
                            </li>
                            <li class="mb-2">
                                <strong>æ£€æŸ¥æ•°æ®åº“è¿æ¥</strong>
                                <ul>
                                    <li>éªŒè¯PostgreSQLæ­£åœ¨è¿è¡Œ</li>
                                    <li>æ£€æŸ¥è¿æ¥æ± çŠ¶æ€</li>
                                    <li>æŸ¥çœ‹æ•°æ®åº“æ—¥å¿—ä¸­çš„é”™è¯¯</li>
                                </ul>
                            </li>
                        </ol>
                    </div>
                </div>
            </div>
            
            <div class="accordion-item bg-dark">
                <h2 class="accordion-header" id="heading4">
                    <button class="accordion-button collapsed bg-dark text-light" type="button" data-bs-toggle="collapse" data-bs-target="#collapse4">
                        <i class="bi bi-shield-lock text-warning me-2"></i>
                        <strong>æƒé™è¢«æ‹’ç» / è®¿é—®å—é™</strong>
                    </button>
                </h2>
                <div id="collapse4" class="accordion-collapse collapse" data-bs-parent="#troubleshootingAccordion">
                    <div class="accordion-body">
                        <p><strong>ç—‡çŠ¶ï¼š</strong>æ— æ³•æŸ¥çœ‹æŸäº›çŸ¿æœºæˆ–è®¿é—®åŠŸèƒ½</p>
                        <p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
                        <ol>
                            <li class="mb-2">
                                <strong>æ£€æŸ¥ç”¨æˆ·è§’è‰²</strong>
                                <ul>
                                    <li><strong>customer</strong> - åªèƒ½æŸ¥çœ‹è‡ªå·±çš„çŸ¿æœº</li>
                                    <li><strong>mining_site</strong> - å¯ä»¥æŸ¥çœ‹å…¶ç«™ç‚¹çš„æ‰€æœ‰çŸ¿æœº</li>
                                    <li><strong>admin/owner</strong> - å¯¹æ‰€æœ‰çŸ¿æœºçš„å®Œå…¨è®¿é—®æƒé™</li>
                                </ul>
                            </li>
                            <li class="mb-2">
                                <strong>éªŒè¯å®¢æˆ·åˆ†é…</strong>
                                <ul>
                                    <li>ç¡®ä¿miner.customer_idä¸ç™»å½•ç”¨æˆ·åŒ¹é…</li>
                                    <li>å¦‚éœ€æ›´æ–°åˆ†é…ï¼Œè¯·è”ç³»ç®¡ç†å‘˜</li>
                                </ul>
                            </li>
                            <li class="mb-2">
                                <strong>ä¼šè¯é—®é¢˜</strong>
                                <ul>
                                    <li>æ³¨é”€å¹¶é‡æ–°ç™»å½•</li>
                                    <li>æ¸…é™¤æµè§ˆå™¨Cookie</li>
                                    <li>æ£€æŸ¥ä¼šè¯è¶…æ—¶è®¾ç½®</li>
                                </ul>
                            </li>
                        </ol>
                    </div>
                </div>
            </div>
            
            <div class="accordion-item bg-dark">
                <h2 class="accordion-header" id="heading5">
                    <button class="accordion-button collapsed bg-dark text-light" type="button" data-bs-toggle="collapse" data-bs-target="#collapse5">
                        <i class="bi bi-thermometer-high text-danger me-2"></i>
                        <strong>æ¸©åº¦è¯¯æŠ¥</strong>
                    </button>
                </h2>
                <div id="collapse5" class="accordion-collapse collapse" data-bs-parent="#troubleshootingAccordion">
                    <div class="accordion-body">
                        <p><strong>ç—‡çŠ¶ï¼š</strong>çŸ¿æœºå†·å´æ—¶æ˜¾ç¤ºæ¸©åº¦å‘Šè­¦</p>
                        <p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
                        <ol>
                            <li class="mb-2">
                                <strong>éªŒè¯ä¼ æ„Ÿå™¨è¯»æ•°</strong>
                                <ul>
                                    <li>æ£€æŸ¥çŸ¿æœºWebç•Œé¢çš„å®é™…æ¸©åº¦</li>
                                    <li>ä¸CGMiner APIå“åº”æ¯”è¾ƒ</li>
                                    <li>ä¼ æ„Ÿå™¨æ•…éšœå¯èƒ½éœ€è¦RMA</li>
                                </ul>
                            </li>
                            <li class="mb-2">
                                <strong>æ›´æ–°å›ºä»¶</strong>
                                <ul>
                                    <li>æ£€æŸ¥åˆ¶é€ å•†çš„å›ºä»¶æ›´æ–°</li>
                                    <li>æ–°å›ºä»¶å¯èƒ½ä¿®å¤ä¼ æ„Ÿå™¨é”™è¯¯</li>
                                </ul>
                            </li>
                            <li class="mb-2">
                                <strong>è°ƒæ•´å‘Šè­¦é˜ˆå€¼</strong>
                                <ul>
                                    <li>è”ç³»ç³»ç»Ÿç®¡ç†å‘˜</li>
                                    <li>å¦‚æœ‰å¿…è¦ï¼Œè¯·æ±‚è°ƒæ•´é˜ˆå€¼</li>
                                    <li>è®°å½•åˆæ³•çš„è¯¯æŠ¥</li>
                                </ul>
                            </li>
                        </ol>
                    </div>
                </div>
            </div>
        </div>
        
        <h5 class="mb-3 mt-5">è·å–é¢å¤–å¸®åŠ©</h5>
        <div class="alert alert-info">
            <i class="bi bi-question-circle-fill me-2"></i>
            <strong>ä»ç„¶æœ‰é—®é¢˜ï¼Ÿ</strong>
            <ul class="mb-0 mt-2">
                <li>è”ç³»æŠ€æœ¯æ”¯æŒå¹¶æä¾›å…·ä½“é”™è¯¯æ¶ˆæ¯</li>
                <li>åŒ…æ‹¬çŸ¿æœºåºåˆ—å·å’ŒIPåœ°å€</li>
                <li>å¦‚æœå¯èƒ½ï¼Œé™„ä¸Šæˆªå›¾</li>
                <li>æè¿°å·²å°è¯•çš„æ­¥éª¤</li>
            </ul>
        </div>
        {% endif %}
    </div>
</div>

<!-- ç« èŠ‚7: æœ¬åœ°éƒ¨ç½² -->
<div class="hosting-card mb-4" id="section-7">
    <div class="hosting-card-header">
        <h4 class="hosting-card-title">
            <i class="bi bi-7-circle-fill me-2" style="color: #f7931a;"></i>
            {% if current_lang == 'en' %}Local Deployment - Direct Miner Connection{% else %}æœ¬åœ°éƒ¨ç½² - ç›´æ¥è¿æ¥çŸ¿æœº{% endif %}
        </h4>
    </div>
    <div class="hosting-card-body">
        {% if current_lang == 'en' %}
        <div class="alert alert-success mb-4">
            <i class="bi bi-check-circle me-2"></i>
            <strong>Advantage:</strong> No Edge Collector needed, simpler architecture, better real-time data
        </div>
        
        <h5 class="mb-3"><i class="bi bi-diagram-3 me-2"></i>Architecture Overview</h5>
        <pre class="bg-dark p-3 rounded text-success small mb-4" style="font-family: monospace;">
Mining Farm LAN (Same Network)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”      â”‚
â”‚  â”‚  HashInsight System â”‚      â”‚ASICâ”‚ â”‚ASICâ”‚ ...  â”‚
â”‚  â”‚  (Local Server)     â”‚      â”‚    â”‚ â”‚    â”‚      â”‚
â”‚  â”‚                     â”‚      â””â”€â”€â”¬â”€â”˜ â””â”€â”€â”¬â”€â”˜      â”‚
â”‚  â”‚  - Data Collection  â”‚         â”‚      â”‚        â”‚
â”‚  â”‚  - Monitoring       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚  â”‚  - Analytics        â”‚   CGMiner API           â”‚
â”‚  â”‚                     â”‚   Port 4028             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</pre>
        
        <h5 class="mb-3"><i class="bi bi-hdd-network me-2"></i>Network Requirements</h5>
        <div class="row g-3 mb-4">
            <div class="col-md-6">
                <div class="p-3 border border-secondary rounded h-100">
                    <h6 class="text-info"><i class="bi bi-geo-alt me-2"></i>Server Location</h6>
                    <ul class="mb-0 small text-muted">
                        <li>On the <strong class="text-warning">same LAN</strong> as miners</li>
                        <li>Can directly ping miner IPs</li>
                        <li>Recommended: Server or IPC in data center</li>
                    </ul>
                </div>
            </div>
            <div class="col-md-6">
                <div class="p-3 border border-secondary rounded h-100">
                    <h6 class="text-info"><i class="bi bi-shield-check me-2"></i>Port Requirements</h6>
                    <ul class="mb-0 small text-muted">
                        <li>Miner port <code class="text-warning">4028</code> (CGMiner API)</li>
                        <li>Ensure firewall allows access</li>
                        <li>Some firmware may use different ports</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <h5 class="mb-3"><i class="bi bi-terminal me-2"></i>Test Connection Commands</h5>
        <pre class="bg-dark p-3 rounded text-success small mb-3"><code># 1. Test ping connectivity
ping 192.168.1.100

# 2. Test CGMiner API port
nc -zv 192.168.1.100 4028

# 3. Send CGMiner command test (note trailing newline required)
echo -e '{"command":"summary"}\n' | nc 192.168.1.100 4028

# Or use Python test (more reliable)
python3 -c "import socket; s=socket.socket(); s.connect(('192.168.1.100',4028)); s.sendall(b'{\"command\":\"summary\"}\\n'); print(s.recv(4096).decode()); s.close()"</code></pre>
        
        <div class="alert alert-warning mb-4">
            <i class="bi bi-exclamation-triangle me-2"></i>
            <strong>Note:</strong> The <code>nc</code> (netcat) command varies across systems. If <code>nc -zv</code> doesn't work, try <code>ncat</code> or the Python command above.
        </div>
        
        <h5 class="mb-3"><i class="bi bi-code-slash me-2"></i>CGMiner API Commands</h5>
        <table class="table table-bordered table-dark">
            <thead>
                <tr>
                    <th>Command</th>
                    <th>Description</th>
                    <th>Example Usage</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>summary</code></td>
                    <td>Get summary statistics (hashrate, uptime, accepted shares)</td>
                    <td><code>echo -e '{"command":"summary"}\n' | nc IP 4028</code></td>
                </tr>
                <tr>
                    <td><code>stats</code></td>
                    <td>Get detailed hardware statistics</td>
                    <td><code>echo -e '{"command":"stats"}\n' | nc IP 4028</code></td>
                </tr>
                <tr>
                    <td><code>devs</code></td>
                    <td>Get device information (hashboards, temperatures)</td>
                    <td><code>echo -e '{"command":"devs"}\n' | nc IP 4028</code></td>
                </tr>
                <tr>
                    <td><code>pools</code></td>
                    <td>Get pool configuration and status</td>
                    <td><code>echo -e '{"command":"pools"}\n' | nc IP 4028</code></td>
                </tr>
            </tbody>
        </table>
        
        <div class="alert alert-info mt-4">
            <i class="bi bi-info-circle me-2"></i>
            <strong>Tip:</strong> If connection fails, check: 1) Miner API enabled 2) Firewall settings 3) Correct IP address
        </div>
        
        {% else %}
        <div class="alert alert-success mb-4">
            <i class="bi bi-check-circle me-2"></i>
            <strong>ä¼˜åŠ¿:</strong> æ— éœ€ Edge Collectorï¼Œæ¶æ„æ›´ç®€å•ï¼Œæ•°æ®å®æ—¶æ€§æ›´å¥½
        </div>
        
        <h5 class="mb-3"><i class="bi bi-diagram-3 me-2"></i>æ¶æ„è¯´æ˜</h5>
        <pre class="bg-dark p-3 rounded text-success small mb-4" style="font-family: monospace;">
çŸ¿åœºå†…ç½‘ (åŒä¸€å±€åŸŸç½‘)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”      â”‚
â”‚  â”‚  HashInsight ç³»ç»Ÿ    â”‚      â”‚çŸ¿æœºâ”‚ â”‚çŸ¿æœºâ”‚ ...  â”‚
â”‚  â”‚  (æœ¬åœ°æœåŠ¡å™¨)        â”‚      â”‚    â”‚ â”‚    â”‚      â”‚
â”‚  â”‚                     â”‚      â””â”€â”€â”¬â”€â”˜ â””â”€â”€â”¬â”€â”˜      â”‚
â”‚  â”‚  - æ•°æ®é‡‡é›†         â”‚         â”‚      â”‚        â”‚
â”‚  â”‚  - ç›‘æ§å‘Šè­¦         â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚  â”‚  - åˆ†ææŠ¥è¡¨         â”‚   CGMiner API           â”‚
â”‚  â”‚                     â”‚   ç«¯å£ 4028             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</pre>
        
        <h5 class="mb-3"><i class="bi bi-hdd-network me-2"></i>ç½‘ç»œè¦æ±‚</h5>
        <div class="row g-3 mb-4">
            <div class="col-md-6">
                <div class="p-3 border border-secondary rounded h-100">
                    <h6 class="text-info"><i class="bi bi-geo-alt me-2"></i>æœåŠ¡å™¨ä½ç½®</h6>
                    <ul class="mb-0 small text-muted">
                        <li>ä¸çŸ¿æœºåœ¨<strong class="text-warning">åŒä¸€å±€åŸŸç½‘</strong></li>
                        <li>èƒ½ç›´æ¥ ping é€šçŸ¿æœº IP</li>
                        <li>æ¨èï¼šæœºæˆ¿å†…æœåŠ¡å™¨æˆ–å·¥æ§æœº</li>
                    </ul>
                </div>
            </div>
            <div class="col-md-6">
                <div class="p-3 border border-secondary rounded h-100">
                    <h6 class="text-info"><i class="bi bi-shield-check me-2"></i>ç«¯å£è¦æ±‚</h6>
                    <ul class="mb-0 small text-muted">
                        <li>çŸ¿æœºç«¯å£ <code class="text-warning">4028</code> (CGMiner API)</li>
                        <li>ç¡®ä¿é˜²ç«å¢™å…è®¸è®¿é—®</li>
                        <li>éƒ¨åˆ†å›ºä»¶å¯èƒ½ä½¿ç”¨å…¶ä»–ç«¯å£</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <h5 class="mb-3"><i class="bi bi-terminal me-2"></i>æµ‹è¯•è¿æ¥å‘½ä»¤</h5>
        <pre class="bg-dark p-3 rounded text-success small mb-3"><code># 1. æµ‹è¯• ping è¿é€š
ping 192.168.1.100

# 2. æµ‹è¯• CGMiner API ç«¯å£
nc -zv 192.168.1.100 4028

# 3. å‘é€ CGMiner å‘½ä»¤æµ‹è¯•ï¼ˆæ³¨æ„æœ«å°¾æ¢è¡Œç¬¦ï¼‰
echo -e '{"command":"summary"}\n' | nc 192.168.1.100 4028

# æˆ–ä½¿ç”¨ Python æµ‹è¯•ï¼ˆæ›´å¯é ï¼‰
python3 -c "import socket; s=socket.socket(); s.connect(('192.168.1.100',4028)); s.sendall(b'{\"command\":\"summary\"}\\n'); print(s.recv(4096).decode()); s.close()"</code></pre>
        
        <div class="alert alert-warning mb-4">
            <i class="bi bi-exclamation-triangle me-2"></i>
            <strong>æ³¨æ„:</strong> ä¸åŒç³»ç»Ÿçš„ <code>nc</code> (netcat) å‘½ä»¤å¯èƒ½æœ‰å·®å¼‚ã€‚å¦‚æœ <code>nc -zv</code> ä¸å·¥ä½œï¼Œè¯·å°è¯• <code>ncat</code> æˆ–ä¸Šé¢çš„ Python å‘½ä»¤ã€‚
        </div>
        
        <h5 class="mb-3"><i class="bi bi-code-slash me-2"></i>CGMiner API å‘½ä»¤</h5>
        <table class="table table-bordered table-dark">
            <thead>
                <tr>
                    <th>å‘½ä»¤</th>
                    <th>è¯´æ˜</th>
                    <th>ä½¿ç”¨ç¤ºä¾‹</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>summary</code></td>
                    <td>è·å–æ±‡æ€»ç»Ÿè®¡ä¿¡æ¯ï¼ˆç®—åŠ›ã€è¿è¡Œæ—¶é—´ã€æ¥å—çš„ä»½é¢ï¼‰</td>
                    <td><code>echo -e '{"command":"summary"}\n' | nc IP 4028</code></td>
                </tr>
                <tr>
                    <td><code>stats</code></td>
                    <td>è·å–è¯¦ç»†ç¡¬ä»¶ç»Ÿè®¡ä¿¡æ¯</td>
                    <td><code>echo -e '{"command":"stats"}\n' | nc IP 4028</code></td>
                </tr>
                <tr>
                    <td><code>devs</code></td>
                    <td>è·å–è®¾å¤‡ä¿¡æ¯ï¼ˆç®—åŠ›æ¿ã€æ¸©åº¦ï¼‰</td>
                    <td><code>echo -e '{"command":"devs"}\n' | nc IP 4028</code></td>
                </tr>
                <tr>
                    <td><code>pools</code></td>
                    <td>è·å–çŸ¿æ± é…ç½®å’ŒçŠ¶æ€</td>
                    <td><code>echo -e '{"command":"pools"}\n' | nc IP 4028</code></td>
                </tr>
            </tbody>
        </table>
        
        <div class="alert alert-info mt-4">
            <i class="bi bi-info-circle me-2"></i>
            <strong>æç¤º:</strong> å¦‚æœè¿æ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥ï¼š1) çŸ¿æœºæ˜¯å¦å¼€å¯ API 2) é˜²ç«å¢™è®¾ç½® 3) IP åœ°å€æ˜¯å¦æ­£ç¡®
        </div>
        {% endif %}
    </div>
</div>

<!-- è¿”å›é¡¶éƒ¨æŒ‰é’® -->
<div class="text-center mt-4">
    <a href="#" class="btn btn-hosting-primary">
        <i class="bi bi-arrow-up me-1"></i>{% if current_lang == 'en' %}Back to Top{% else %}è¿”å›é¡¶éƒ¨{% endif %}
    </a>
</div>

{% endblock %}

{% block scripts %}
{{ super() }}
<script>
// å¹³æ»‘æ»šåŠ¨åˆ°ç« èŠ‚
document.querySelectorAll('a[href^="#section-"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
            target.scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });
        }
    });
});
</script>
{% endblock %}
