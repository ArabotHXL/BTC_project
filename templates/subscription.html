<!DOCTYPE html>
<html lang="{{ 'zh-CN' if current_lang == 'zh' else 'en' }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% if current_lang == 'en' %}My Subscription{% else %}我的订阅{% endif %} - BTC Mining Calculator</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css" rel="stylesheet">
</head>
<body class="bg-dark text-light">
    <nav class="navbar navbar-dark bg-dark mb-3">
        <div class="container">
            <a class="navbar-brand" href="{{ url_for('home') }}">BTC Mining Calculator</a>
            <div class="d-flex">
                <button type="button" data-lang-switch="zh" data-lang="zh" 
                        class="btn btn-sm btn-outline-light {{ 'active' if current_lang == 'zh' else '' }} lang-switch-btn me-1">
                    中文
                </button>
                <button type="button" data-lang-switch="en" data-lang="en" 
                        class="btn btn-sm btn-outline-light {{ 'active' if current_lang == 'en' else '' }} lang-switch-btn">
                    EN
                </button>
            </div>
        </div>
    </nav>
    <div class="container py-5">
        <div class="row">
            <div class="col-md-8 mx-auto">
                <div class="card bg-secondary">
                    <div class="card-body">
                        <h2 class="card-title">
                            {% if current_lang == 'en' %}Your Subscription{% else %}您的订阅{% endif %}
                        </h2>
                        
                        {% if user %}
                        <div class="mb-4">
                            <h5>Account: {{ user.email }}</h5>
                            <p class="text-muted">Member since: {{ user.created_at.strftime('%Y-%m-%d') if user.created_at else 'N/A' }}</p>
                        </div>

                        {% if subscription %}
                        <div class="alert alert-success">
                            <h6>Current Plan: {{ subscription.plan.name if subscription.plan else 'Free' }}</h6>
                            <p>Status: {{ subscription.status }}</p>
                            {% if subscription.current_period_end %}
                            <p>Next billing: {{ subscription.current_period_end.strftime('%Y-%m-%d') }}</p>
                            {% endif %}
                        </div>
                        {% else %}
                        <div class="alert alert-info">
                            <h6>Free Plan</h6>
                            <p>You are currently on the free plan. Upgrade to unlock more features!</p>
                        </div>
                        {% endif %}

                        <div class="d-grid gap-2">
                            <a href="{{ url_for('pricing') }}" class="btn btn-primary">
                                {% if current_lang == 'en' %}View Plans{% else %}查看方案{% endif %}
                            </a>
                            <a href="{{ url_for('index') }}" class="btn btn-outline-secondary">
                                {% if current_lang == 'en' %}Back to Dashboard{% else %}返回仪表板{% endif %}
                            </a>
                        </div>
                        {% else %}
                        <div class="alert alert-warning">
                            <p>Please log in to view your subscription details.</p>
                            <a href="{{ url_for('auth.login') }}" class="btn btn-primary">Login</a>
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/static/js/i18n.js"></script>
</body>
</html>