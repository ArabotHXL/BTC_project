{% extends "base.html" %}

{% block title %}
    {% if current_lang == 'en' %}System Configuration{% else %}ç³»ç»Ÿé…ç½®ä¸­å¿ƒ{% endif %} - BTC Mining Calculator
{% endblock %}

{% block extra_css %}
<style>
:root {
    --primary-gold: #ffc107;
    --bg-gradient: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%);
    --card-bg: rgba(255, 255, 255, 0.05);
    --card-border: rgba(255, 255, 255, 0.1);
}

body {
    background: var(--bg-gradient);
    min-height: 100vh;
}

.config-container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 2rem;
}

.config-header {
    text-align: center;
    margin-bottom: 3rem;
}

.config-title {
    font-size: 2.5rem;
    font-weight: 700;
    background: linear-gradient(135deg, #ffc107, #17a2b8, #28a745);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    margin-bottom: 1rem;
}

.status-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
    margin-bottom: 3rem;
}

.status-card {
    background: var(--card-bg);
    border: 1px solid var(--card-border);
    border-radius: 16px;
    padding: 1.5rem;
    backdrop-filter: blur(10px);
}

.status-header {
    display: flex;
    align-items: center;
    margin-bottom: 1rem;
}

.status-icon {
    font-size: 1.5rem;
    margin-right: 0.75rem;
}

.status-title {
    font-size: 1.2rem;
    font-weight: 600;
    color: #ffffff;
}

.status-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.5rem 0;
    border-bottom: 1px solid rgba(255,255,255,0.1);
}

.status-item:last-child {
    border-bottom: none;
}

.status-badge {
    padding: 0.25rem 0.75rem;
    border-radius: 12px;
    font-size: 0.8rem;
    font-weight: 600;
}

.status-enabled { background: #28a745; color: white; }
.status-disabled { background: #dc3545; color: white; }
.status-configured { background: #17a2b8; color: white; }
.status-pending { background: #ffc107; color: black; }

.action-buttons {
    display: flex;
    gap: 1rem;
    margin-top: 2rem;
    flex-wrap: wrap;
}

.btn-config {
    padding: 0.75rem 1.5rem;
    border-radius: 12px;
    border: none;
    font-weight: 600;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    transition: all 0.3s ease;
}

.btn-primary { background: #007bff; color: white; }
.btn-warning { background: #ffc107; color: black; }
.btn-success { background: #28a745; color: white; }
.btn-info { background: #17a2b8; color: white; }

.btn-config:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
}
</style>
{% endblock %}

{% block content %}
<div class="config-container">
    <div class="config-header">
        <h1 class="config-title">
            <i class="bi bi-gear-wide-connected me-3"></i>
            {% if current_lang == 'en' %}System Configuration Center{% else %}ç³»ç»Ÿé…ç½®ä¸­å¿ƒ{% endif %}
        </h1>
        <p class="text-light">
            {% if current_lang == 'en' %}Manage Web3, blockchain, and system settings{% else %}ç®¡ç†Web3ã€åŒºå—é“¾å’Œç³»ç»Ÿè®¾ç½®{% endif %}
        </p>
    </div>

    <div class="status-grid">
        <!-- Web3é…ç½®çŠ¶æ€ -->
        <div class="status-card">
            <div class="status-header">
                <i class="bi bi-grid-3x3-gap status-icon text-info"></i>
                <h3 class="status-title">
                    {% if current_lang == 'en' %}Web3 Configuration{% else %}Web3é…ç½®{% endif %}
                </h3>
            </div>
            <div class="status-item">
                <span>{% if current_lang == 'en' %}Blockchain Enabled{% else %}åŒºå—é“¾å¯ç”¨{% endif %}</span>
                <span class="status-badge {{ 'status-enabled' if config_status.blockchain_enabled else 'status-disabled' }}">
                    {{ 'Enabled' if config_status.blockchain_enabled else 'Disabled' }}
                </span>
            </div>
            <div class="status-item">
                <span>{% if current_lang == 'en' %}Encryption Configured{% else %}åŠ å¯†é…ç½®{% endif %}</span>
                <span class="status-badge {{ 'status-configured' if config_status.encryption_configured else 'status-pending' }}">
                    {{ 'Configured' if config_status.encryption_configured else 'Missing' }}
                </span>
            </div>
            <div class="status-item">
                <span>{% if current_lang == 'en' %}Blockchain Key{% else %}åŒºå—é“¾å¯†é’¥{% endif %}</span>
                <span class="status-badge {{ 'status-configured' if config_status.blockchain_key_configured else 'status-pending' }}">
                    {{ 'Set' if config_status.blockchain_key_configured else 'Missing' }}
                </span>
            </div>
            <div class="status-item">
                <span>{% if current_lang == 'en' %}IPFS Storage{% else %}IPFSå­˜å‚¨{% endif %}</span>
                <span class="status-badge {{ 'status-configured' if config_status.pinata_configured else 'status-pending' }}">
                    {{ 'Configured' if config_status.pinata_configured else 'Missing' }}
                </span>
            </div>
            <div style="margin-top: 1rem;">
                <button class="btn-config btn-warning w-100" onclick="openConfigWizard()">
                    <i class="bi bi-gear-fill"></i>
                    {% if current_lang == 'en' %}Configure Web3{% else %}é…ç½®Web3{% endif %}
                </button>
            </div>
        </div>

        <!-- ç½‘ç»œçŠ¶æ€ -->
        <div class="status-card">
            <div class="status-header">
                <i class="bi bi-wifi status-icon text-success"></i>
                <h3 class="status-title">
                    {% if current_lang == 'en' %}Network Status{% else %}ç½‘ç»œçŠ¶æ€{% endif %}
                </h3>
            </div>
            <div class="status-item">
                <span>{% if current_lang == 'en' %}Connection{% else %}è¿æ¥çŠ¶æ€{% endif %}</span>
                <span class="status-badge {{ 'status-enabled' if blockchain_status.connected else 'status-disabled' }}">
                    {{ 'Connected' if blockchain_status.connected else 'Disconnected' }}
                </span>
            </div>
            <div class="status-item">
                <span>{% if current_lang == 'en' %}Network{% else %}ç½‘ç»œ{% endif %}</span>
                <span class="text-info">{{ blockchain_status.network }}</span>
            </div>
            <div class="status-item">
                <span>{% if current_lang == 'en' %}Mainnet Mode{% else %}ä¸»ç½‘æ¨¡å¼{% endif %}</span>
                <span class="status-badge {{ 'status-enabled' if config_status.mainnet_enabled else 'status-disabled' }}">
                    {{ 'Enabled' if config_status.mainnet_enabled else 'Testnet' }}
                </span>
            </div>
        </div>

        <!-- ç³»ç»Ÿç»Ÿè®¡ -->
        <div class="status-card">
            <div class="status-header">
                <i class="bi bi-bar-chart status-icon text-warning"></i>
                <h3 class="status-title">
                    {% if current_lang == 'en' %}System Statistics{% else %}ç³»ç»Ÿç»Ÿè®¡{% endif %}
                </h3>
            </div>
            <div class="status-item">
                <span>{% if current_lang == 'en' %}Active Sessions{% else %}æ´»è·ƒä¼šè¯{% endif %}</span>
                <span class="text-success">{{ system_stats.active_sessions }}</span>
            </div>
            <div class="status-item">
                <span>{% if current_lang == 'en' %}NFT Certificates{% else %}NFTè¯ä¹¦{% endif %}</span>
                <span class="text-info">{{ system_stats.total_certificates }}</span>
            </div>
            <div class="status-item">
                <span>{% if current_lang == 'en' %}Transparency Score{% else %}é€æ˜åº¦è¯„åˆ†{% endif %}</span>
                <span class="text-warning">{{ system_stats.transparency_score }}%</span>
            </div>
        </div>
    </div>

    <!-- å¿«é€Ÿæ“ä½œæŒ‰é’® -->
    <div class="action-buttons">
        <a href="{{ url_for('web3_dashboard') }}" class="btn-config btn-primary">
            <i class="bi bi-grid-3x3-gap"></i>
            {% if current_lang == 'en' %}Web3 Dashboard{% else %}Web3æ§åˆ¶å°{% endif %}
        </a>
        <a href="{{ url_for('blockchain_verification') }}" class="btn-config btn-info">
            <i class="bi bi-shield-check"></i>
            {% if current_lang == 'en' %}Blockchain Verification{% else %}åŒºå—é“¾éªŒè¯{% endif %}
        </a>
        <a href="{{ url_for('transparency_verification_center') }}" class="btn-config btn-success">
            <i class="bi bi-eye"></i>
            {% if current_lang == 'en' %}Transparency Center{% else %}é€æ˜åº¦ä¸­å¿ƒ{% endif %}
        </a>
        <a href="{{ url_for('admin.security_center') }}" class="btn-config btn-warning">
            <i class="bi bi-shield-lock"></i>
            {% if current_lang == 'en' %}Security Center{% else %}å®‰å…¨ä¸­å¿ƒ{% endif %}
        </a>
    </div>
</div>

<!-- é…ç½®å‘å¯¼æ¨¡æ€æ¡† -->
<div class="modal fade" id="configWizardModal" tabindex="-1" aria-labelledby="configWizardLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content" style="background: var(--card-bg); border: 1px solid var(--card-border); backdrop-filter: blur(20px);">
            <div class="modal-header" style="border-bottom: 1px solid rgba(255,255,255,0.1);">
                <h5 class="modal-title text-white" id="configWizardLabel">
                    <i class="bi bi-gear-wide-connected me-2"></i>
                    {% if current_lang == 'en' %}Web3 Configuration Wizard{% else %}Web3é…ç½®å‘å¯¼{% endif %}
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" style="padding: 1.5rem;">
                <!-- é€‰é¡¹å¡å¯¼èˆª -->
                <ul class="nav nav-tabs mb-3" id="configTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="metamask-tab" data-bs-toggle="tab" data-bs-target="#metamask-panel" type="button" role="tab">
                            <i class="bi bi-wallet2 me-2"></i>
                            {% if current_lang == 'en' %}MetaMask{% else %}MetaMaské’±åŒ…{% endif %}
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="secrets-tab" data-bs-toggle="tab" data-bs-target="#secrets-panel" type="button" role="tab">
                            <i class="bi bi-key-fill me-2"></i>
                            {% if current_lang == 'en' %}Replit Secrets{% else %}Replitå¯†é’¥{% endif %}
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="manual-tab" data-bs-toggle="tab" data-bs-target="#manual-panel" type="button" role="tab">
                            <i class="bi bi-book-fill me-2"></i>
                            {% if current_lang == 'en' %}Manual Guide{% else %}æ‰‹åŠ¨é…ç½®{% endif %}
                        </button>
                    </li>
                </ul>

                <!-- é€‰é¡¹å¡å†…å®¹ -->
                <div class="tab-content" id="configTabContent">
                    <!-- MetaMaské€‰é¡¹å¡ -->
                    <div class="tab-pane fade show active" id="metamask-panel" role="tabpanel">
                        <div class="alert alert-success" style="background: rgba(40,167,69,0.1); border: 1px solid #28a745;">
                            <i class="bi bi-shield-check me-2"></i>
                            {% if current_lang == 'en' %}<strong>Most Secure Option</strong>{% else %}<strong>æœ€å®‰å…¨çš„é€‰é¡¹</strong>{% endif %}
                        </div>
                        
                        <h6 class="text-white mb-3">
                            {% if current_lang == 'en' %}Connect with MetaMask Wallet{% else %}ä½¿ç”¨MetaMaské’±åŒ…è¿æ¥{% endif %}
                        </h6>
                        
                        <div class="mb-3 p-3" style="background: rgba(255,255,255,0.03); border-radius: 8px;">
                            <p class="text-light mb-2">
                                {% if current_lang == 'en' %}
                                    âœ… Your private key never leaves your browser<br>
                                    âœ… No need to share credentials<br>
                                    âœ… One-click connection
                                {% else %}
                                    âœ… ç§é’¥æ°¸è¿œä¸ç¦»å¼€æ‚¨çš„æµè§ˆå™¨<br>
                                    âœ… æ— éœ€åˆ†äº«å‡­è¯<br>
                                    âœ… ä¸€é”®è¿æ¥
                                {% endif %}
                            </p>
                        </div>

                        <div class="mb-3">
                            <p class="text-light">
                                {% if current_lang == 'en' %}
                                    <strong>How it works:</strong><br>
                                    1. Install MetaMask browser extension<br>
                                    2. Create or import your wallet<br>
                                    3. Click the button below to connect<br>
                                    4. Approve the connection in MetaMask
                                {% else %}
                                    <strong>å·¥ä½œåŸç†ï¼š</strong><br>
                                    1. å®‰è£…MetaMaskæµè§ˆå™¨æ‰©å±•<br>
                                    2. åˆ›å»ºæˆ–å¯¼å…¥æ‚¨çš„é’±åŒ…<br>
                                    3. ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®è¿æ¥<br>
                                    4. åœ¨MetaMaskä¸­æ‰¹å‡†è¿æ¥
                                {% endif %}
                            </p>
                        </div>

                        <div class="d-grid gap-2">
                            <a href="{{ url_for('web3_dashboard') }}" class="btn btn-success btn-lg">
                                <i class="bi bi-wallet2 me-2"></i>
                                {% if current_lang == 'en' %}Go to Web3 Dashboard{% else %}å‰å¾€Web3æ§åˆ¶å°{% endif %}
                            </a>
                        </div>
                    </div>

                    <!-- Replit Secretsé€‰é¡¹å¡ -->
                    <div class="tab-pane fade" id="secrets-panel" role="tabpanel">
                        <div class="alert alert-info" style="background: rgba(23,162,184,0.1); border: 1px solid #17a2b8;">
                            <i class="bi bi-info-circle me-2"></i>
                            {% if current_lang == 'en' %}<strong>Recommended for Developers</strong>{% else %}<strong>æ¨èç»™å¼€å‘è€…</strong>{% endif %}
                        </div>
                        
                        <h6 class="text-white mb-3">
                            {% if current_lang == 'en' %}Configure via Replit Secrets{% else %}é€šè¿‡Replitå¯†é’¥é…ç½®{% endif %}
                        </h6>

                        <div class="mb-3 p-3" style="background: rgba(255,255,255,0.03); border-radius: 8px;">
                            <p class="text-light mb-2">
                                {% if current_lang == 'en' %}
                                    <strong>Required Environment Variables:</strong><br><br>
                                    <code style="background: rgba(0,0,0,0.3); padding: 2px 6px; border-radius: 4px;">BLOCKCHAIN_PRIVATE_KEY</code> - Your blockchain wallet private key<br>
                                    <code style="background: rgba(0,0,0,0.3); padding: 2px 6px; border-radius: 4px;">PINATA_JWT</code> - Pinata API token for IPFS storage<br>
                                    <code style="background: rgba(0,0,0,0.3); padding: 2px 6px; border-radius: 4px;">BLOCKCHAIN_ENCRYPTION_PASSWORD</code> - Data encryption password
                                {% else %}
                                    <strong>éœ€è¦çš„ç¯å¢ƒå˜é‡ï¼š</strong><br><br>
                                    <code style="background: rgba(0,0,0,0.3); padding: 2px 6px; border-radius: 4px;">BLOCKCHAIN_PRIVATE_KEY</code> - åŒºå—é“¾é’±åŒ…ç§é’¥<br>
                                    <code style="background: rgba(0,0,0,0.3); padding: 2px 6px; border-radius: 4px;">PINATA_JWT</code> - Pinata IPFSå­˜å‚¨APIä»¤ç‰Œ<br>
                                    <code style="background: rgba(0,0,0,0.3); padding: 2px 6px; border-radius: 4px;">BLOCKCHAIN_ENCRYPTION_PASSWORD</code> - æ•°æ®åŠ å¯†å¯†ç 
                                {% endif %}
                            </p>
                        </div>

                        <div class="mb-3">
                            <p class="text-light">
                                {% if current_lang == 'en' %}
                                    <strong>Steps:</strong><br>
                                    1. Click "Tools" in left sidebar â†’ "Secrets"<br>
                                    2. Click "New Secret" button<br>
                                    3. Enter variable name (e.g., BLOCKCHAIN_PRIVATE_KEY)<br>
                                    4. Paste your value securely<br>
                                    5. Restart the application
                                {% else %}
                                    <strong>æ“ä½œæ­¥éª¤ï¼š</strong><br>
                                    1. ç‚¹å‡»å·¦ä¾§æ "Tools" â†’ "Secrets"<br>
                                    2. ç‚¹å‡»"New Secret"æŒ‰é’®<br>
                                    3. è¾“å…¥å˜é‡åï¼ˆå¦‚ï¼šBLOCKCHAIN_PRIVATE_KEYï¼‰<br>
                                    4. å®‰å…¨ç²˜è´´æ‚¨çš„å€¼<br>
                                    5. é‡å¯åº”ç”¨
                                {% endif %}
                            </p>
                        </div>

                        <div class="alert alert-warning" style="background: rgba(255,193,7,0.1); border: 1px solid #ffc107;">
                            <i class="bi bi-shield-exclamation me-2"></i>
                            {% if current_lang == 'en' %}
                                <strong>Security Note:</strong> Replit automatically encrypts all secrets. Never share your private keys with anyone!
                            {% else %}
                                <strong>å®‰å…¨æç¤ºï¼š</strong> Replitä¼šè‡ªåŠ¨åŠ å¯†æ‰€æœ‰å¯†é’¥ã€‚åˆ‡å‹¿ä¸ä»»ä½•äººåˆ†äº«æ‚¨çš„ç§é’¥ï¼
                            {% endif %}
                        </div>
                    </div>

                    <!-- æ‰‹åŠ¨é…ç½®é€‰é¡¹å¡ -->
                    <div class="tab-pane fade" id="manual-panel" role="tabpanel">
                        <div class="alert alert-warning" style="background: rgba(255,193,7,0.1); border: 1px solid #ffc107;">
                            <i class="bi bi-book me-2"></i>
                            {% if current_lang == 'en' %}<strong>For Reference Only</strong>{% else %}<strong>ä»…ä¾›å‚è€ƒ</strong>{% endif %}
                        </div>
                        
                        <h6 class="text-white mb-3">
                            {% if current_lang == 'en' %}Manual Configuration Guide{% else %}æ‰‹åŠ¨é…ç½®æŒ‡å—{% endif %}
                        </h6>

                        <div class="accordion" id="manualConfigAccordion">
                            <!-- 1. åŒºå—é“¾ç§é’¥ -->
                            <div class="accordion-item" style="background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.1); margin-bottom: 0.5rem;">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#privateKeyInfo" style="background: rgba(255,255,255,0.05); color: white;">
                                        {% if current_lang == 'en' %}1. Blockchain Private Key{% else %}1. åŒºå—é“¾ç§é’¥{% endif %}
                                    </button>
                                </h2>
                                <div id="privateKeyInfo" class="accordion-collapse collapse" data-bs-parent="#manualConfigAccordion">
                                    <div class="accordion-body text-light">
                                        {% if current_lang == 'en' %}
                                            <strong>What is it?</strong><br>
                                            Your wallet's private key for signing blockchain transactions.<br><br>
                                            <strong>How to get it?</strong><br>
                                            â€¢ From MetaMask: Settings â†’ Security & Privacy â†’ Reveal Private Key<br>
                                            â€¢ Keep it absolutely secret!<br><br>
                                            <strong>Security Warning:</strong><br>
                                            ğŸš¨ Anyone with this key controls your wallet funds<br>
                                            ğŸš¨ Never share it or input it into untrusted applications
                                        {% else %}
                                            <strong>è¿™æ˜¯ä»€ä¹ˆï¼Ÿ</strong><br>
                                            æ‚¨é’±åŒ…çš„ç§é’¥ï¼Œç”¨äºç­¾ç½²åŒºå—é“¾äº¤æ˜“ã€‚<br><br>
                                            <strong>å¦‚ä½•è·å–ï¼Ÿ</strong><br>
                                            â€¢ ä»MetaMask: è®¾ç½® â†’ å®‰å…¨ä¸éšç§ â†’ æ˜¾ç¤ºç§é’¥<br>
                                            â€¢ åŠ¡å¿…ä¿å¯†ï¼<br><br>
                                            <strong>å®‰å…¨è­¦å‘Šï¼š</strong><br>
                                            ğŸš¨ ä»»ä½•æ‹¥æœ‰æ­¤å¯†é’¥çš„äººéƒ½èƒ½æ§åˆ¶æ‚¨çš„é’±åŒ…èµ„é‡‘<br>
                                            ğŸš¨ åˆ‡å‹¿åˆ†äº«æˆ–è¾“å…¥åˆ°ä¸å¯ä¿¡çš„åº”ç”¨ä¸­
                                        {% endif %}
                                    </div>
                                </div>
                            </div>

                            <!-- 2. Pinata JWT -->
                            <div class="accordion-item" style="background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.1); margin-bottom: 0.5rem;">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#pinataInfo" style="background: rgba(255,255,255,0.05); color: white;">
                                        {% if current_lang == 'en' %}2. Pinata JWT Token{% else %}2. Pinata JWTä»¤ç‰Œ{% endif %}
                                    </button>
                                </h2>
                                <div id="pinataInfo" class="accordion-collapse collapse" data-bs-parent="#manualConfigAccordion">
                                    <div class="accordion-body text-light">
                                        {% if current_lang == 'en' %}
                                            <strong>What is it?</strong><br>
                                            API token for IPFS file storage via Pinata service.<br><br>
                                            <strong>How to get it?</strong><br>
                                            1. Visit <a href="https://pinata.cloud" target="_blank" class="text-info">pinata.cloud</a><br>
                                            2. Sign up for free account<br>
                                            3. Go to API Keys section<br>
                                            4. Create new JWT token<br>
                                            5. Copy and save securely
                                        {% else %}
                                            <strong>è¿™æ˜¯ä»€ä¹ˆï¼Ÿ</strong><br>
                                            ç”¨äºé€šè¿‡PinataæœåŠ¡è¿›è¡ŒIPFSæ–‡ä»¶å­˜å‚¨çš„APIä»¤ç‰Œã€‚<br><br>
                                            <strong>å¦‚ä½•è·å–ï¼Ÿ</strong><br>
                                            1. è®¿é—® <a href="https://pinata.cloud" target="_blank" class="text-info">pinata.cloud</a><br>
                                            2. æ³¨å†Œå…è´¹è´¦æˆ·<br>
                                            3. è¿›å…¥API Keyséƒ¨åˆ†<br>
                                            4. åˆ›å»ºæ–°çš„JWTä»¤ç‰Œ<br>
                                            5. å¤åˆ¶å¹¶å®‰å…¨ä¿å­˜
                                        {% endif %}
                                    </div>
                                </div>
                            </div>

                            <!-- 3. åŠ å¯†å¯†ç  -->
                            <div class="accordion-item" style="background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.1);">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#encryptionInfo" style="background: rgba(255,255,255,0.05); color: white;">
                                        {% if current_lang == 'en' %}3. Encryption Password{% else %}3. åŠ å¯†å¯†ç {% endif %}
                                    </button>
                                </h2>
                                <div id="encryptionInfo" class="accordion-collapse collapse" data-bs-parent="#manualConfigAccordion">
                                    <div class="accordion-body text-light">
                                        {% if current_lang == 'en' %}
                                            <strong>What is it?</strong><br>
                                            A strong password to encrypt blockchain data.<br><br>
                                            <strong>Requirements:</strong><br>
                                            â€¢ Minimum 16 characters<br>
                                            â€¢ Mix of letters, numbers, and symbols<br>
                                            â€¢ Store it securely (password manager recommended)<br><br>
                                            <strong>Example format:</strong><br>
                                            MySecure#Pass2024!Blockchain
                                        {% else %}
                                            <strong>è¿™æ˜¯ä»€ä¹ˆï¼Ÿ</strong><br>
                                            ç”¨äºåŠ å¯†åŒºå—é“¾æ•°æ®çš„å¼ºå¯†ç ã€‚<br><br>
                                            <strong>è¦æ±‚ï¼š</strong><br>
                                            â€¢ è‡³å°‘16ä¸ªå­—ç¬¦<br>
                                            â€¢ å­—æ¯ã€æ•°å­—å’Œç¬¦å·æ··åˆ<br>
                                            â€¢ å®‰å…¨å­˜å‚¨ï¼ˆæ¨èä½¿ç”¨å¯†ç ç®¡ç†å™¨ï¼‰<br><br>
                                            <strong>ç¤ºä¾‹æ ¼å¼ï¼š</strong><br>
                                            MySecure#Pass2024!Blockchain
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="alert alert-danger mt-3" style="background: rgba(220,53,69,0.1); border: 1px solid #dc3545;">
                            <i class="bi bi-exclamation-triangle-fill me-2"></i>
                            {% if current_lang == 'en' %}
                                <strong>Critical Security Warning:</strong><br>
                                This application does NOT collect or store your private keys. Always use MetaMask or Replit Secrets for secure configuration.
                            {% else %}
                                <strong>é‡è¦å®‰å…¨è­¦å‘Šï¼š</strong><br>
                                æœ¬åº”ç”¨ä¸ä¼šæ”¶é›†æˆ–å­˜å‚¨æ‚¨çš„ç§é’¥ã€‚è¯·å§‹ç»ˆä½¿ç”¨MetaMaskæˆ–Replit Secretsè¿›è¡Œå®‰å…¨é…ç½®ã€‚
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer" style="border-top: 1px solid rgba(255,255,255,0.1);">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                    {% if current_lang == 'en' %}Close{% else %}å…³é—­{% endif %}
                </button>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block scripts %}
<script>
// æ‰“å¼€é…ç½®å‘å¯¼
function openConfigWizard() {
    // é‡ç½®åˆ°MetaMaské€‰é¡¹å¡
    const metamaskTab = document.getElementById('metamask-tab');
    const metamaskTabInstance = new bootstrap.Tab(metamaskTab);
    metamaskTabInstance.show();
    
    // æ˜¾ç¤ºæ¨¡æ€æ¡†
    const modal = new bootstrap.Modal(document.getElementById('configWizardModal'));
    modal.show();
}

// è‡ªå®šä¹‰é€‰é¡¹å¡æ ·å¼
document.addEventListener('DOMContentLoaded', function() {
    const style = document.createElement('style');
    style.textContent = `
        .nav-tabs {
            border-bottom: 2px solid rgba(255,255,255,0.1);
        }
        .nav-tabs .nav-link {
            color: #aaa;
            border: none;
            border-bottom: 2px solid transparent;
            transition: all 0.3s ease;
        }
        .nav-tabs .nav-link:hover {
            color: #fff;
            border-bottom-color: rgba(255,193,7,0.5);
        }
        .nav-tabs .nav-link.active {
            color: #ffc107;
            background: transparent;
            border-bottom-color: #ffc107;
        }
        .accordion-button:not(.collapsed) {
            background: rgba(255,193,7,0.1);
            color: #ffc107;
        }
        .w-100 {
            width: 100%;
        }
    `;
    document.head.appendChild(style);
});
</script>
{% endblock %}