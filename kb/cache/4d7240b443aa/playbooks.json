[
  {
    "playbook_id": "pb_power_psu_no_output_or_protect",
    "title": "供电/PSU：无输出、保护模式、掉电重启",
    "title_en": "Power/PSU: No Output, Protection Mode, Power Cycling",
    "goal": "快速区分外部供电/线缆/PSU 与矿机内部短路或过载。",
    "goal_en": "Quickly distinguish external power/cable/PSU from internal short circuit or overload.",
    "safety": [
      "高压危险：任何拆PSU/测量前必须断电并等待放电；不熟悉开关电源维修请送修。",
      "防静电（ESD）；避免金属工具短路。"
    ],
    "safety_en": [
      "High voltage danger: Always power off and wait for discharge before disassembling PSU/measuring; send for repair if unfamiliar with switch-mode PSU maintenance.",
      "ESD protection; avoid shorting with metal tools."
    ],
    "steps": [
      "记录：PSU 指示灯/风扇、是否异味、重启频率、日志中的 AC fail / power off / protect 等关键词。",
      "外部：确认插座/PDU 电压正常；更换电源线与插座（A/B）。",
      "线束：检查铜排螺丝、接插件是否松动/烧蚀；重新紧固或替换线束。",
      "交叉：互换 PSU（同型号）验证是否随 PSU 迁移。",
      "若仍异常：最小系统定位——断开全部哈希板，仅保留控制板+网络上电，判断是否为内部短路/控制板异常。",
      "确认 PSU 故障：更换或送修；确认内部短路：进入控制板/哈希板分段排查。"
    ],
    "steps_en": [
      "Record: PSU indicator lights/fans, unusual smell, restart frequency, log keywords like AC fail / power off / protect.",
      "External: Verify outlet/PDU voltage is normal; swap power cable and outlet (A/B test).",
      "Wiring: Check busbar screws, connectors for looseness/burn marks; re-tighten or replace harness.",
      "Cross-swap: Exchange PSU (same model) to verify if issue follows the PSU.",
      "If still abnormal: Minimum system isolation — disconnect all hash boards, keep only control board + network powered on to determine if it's internal short circuit/control board issue.",
      "Confirmed PSU fault: Replace or send for repair; confirmed internal short: proceed to control board/hash board segmented troubleshooting."
    ],
    "escalation": [
      "需要PSU板级维修或内部短路定位到板级器件时升级至维修中心。"
    ],
    "escalation_en": [
      "Escalate to repair center when board-level PSU repair or internal short circuit localization to board-level components is needed."
    ],
    "verification": [
      "稳定运行 30–60 分钟无掉电；输出功率与温升正常。"
    ],
    "verification_en": [
      "Stable operation for 30-60 minutes without power loss; output power and temperature rise normal."
    ],
    "artifacts": [
      "PSU 型号/序列号照片",
      "铜排/接插件照片",
      "A/B 互换记录"
    ],
    "artifacts_en": [
      "PSU model/serial number photo",
      "Busbar/connector photo",
      "A/B swap test record"
    ],
    "sources": [
      "bitmain_antminer_failures_troubleshooting",
      "whatsminer_error_codes_pdf_20210930"
    ]
  },
  {
    "playbook_id": "pb_network_no_ip_unreachable",
    "title": "网络：无 IP、Web 不可达、IP 已知但进不去",
    "title_en": "Network: No IP, Web Unreachable, Known IP But Inaccessible",
    "goal": "把问题拆为 DHCP/交换机/线缆 → 浏览器/缓存 → 控制板/固件。",
    "goal_en": "Break down the problem into DHCP/switch/cable → browser/cache → control board/firmware.",
    "safety": [
      "拔插网线建议断电；避免在潮湿环境操作。"
    ],
    "safety_en": [
      "Power off before unplugging/plugging network cables; avoid operating in humid environments."
    ],
    "steps": [
      "更换网线与交换机端口；确认交换机口灯与同网段设备正常。",
      "检查 DHCP 是否开启、是否 MAC 绑定/白名单导致分配失败；查看 DHCP 租约表。",
      "若“知道 IP 但进不去”：换浏览器/清缓存；确认使用 http 而非 https；必要时恢复出厂。",
      "若仍失败：按品牌手册进行 SD/TF 刷机或控制板重刷；怀疑控制板网口/固件损坏则更换/送修。"
    ],
    "steps_en": [
      "Swap network cable and switch port; verify switch port light and devices on the same subnet are normal.",
      "Check if DHCP is enabled, whether MAC binding/whitelist is causing allocation failure; review DHCP lease table.",
      "If 'known IP but can't access': Try different browser/clear cache; confirm using http not https; factory reset if necessary.",
      "If still failing: Follow brand manual for SD/TF card reflash or control board reflash; replace/send for repair if control board NIC/firmware damage suspected."
    ],
    "escalation": [
      "需要控制板电压测量、网口器件维修或刷机失败时升级至维修中心。"
    ],
    "escalation_en": [
      "Escalate to repair center when control board voltage measurement, NIC component repair, or reflash failure occurs."
    ],
    "verification": [
      "稳定获得 IP；Web UI 可访问；可完成升级/配置；矿池连接正常。"
    ],
    "verification_en": [
      "Stable IP obtained; Web UI accessible; upgrade/configuration can complete; pool connection normal."
    ],
    "artifacts": [
      "交换机/DHCP 租约截图",
      "IP reporter/扫描结果",
      "升级/刷机日志"
    ],
    "artifacts_en": [
      "Switch/DHCP lease table screenshot",
      "IP reporter/scan results",
      "Upgrade/reflash log"
    ],
    "sources": [
      "bitmain_cant_find_ip",
      "bitmain_antminer_failures_troubleshooting"
    ]
  },
  {
    "playbook_id": "pb_pool_auth_disconnect",
    "title": "矿池：无法连接/授权失败/频繁断连",
    "title_en": "Pool: Connection Failed / Auth Failed / Frequent Disconnects",
    "goal": "从配置错误 → 网络/DNS/NTP → 控制板异常逐层排除。",
    "goal_en": "Eliminate layer by layer from config error → network/DNS/NTP → control board anomaly.",
    "safety": [
      "避免频繁重启全场；先在单机验证配置。"
    ],
    "safety_en": [
      "Avoid frequently restarting the entire farm; verify configuration on a single machine first."
    ],
    "steps": [
      "核对矿池 URL/端口/协议（stratum+tcp/ssl）、worker/密码是否含空格/全半角符号。",
      "切换备用矿池（failover）验证是否为矿池侧问题。",
      "排查 DNS 解析、网关出网、端口限制（矿场 LAN 防火墙/限流）。",
      "确认 NTP 时间正确（时间漂移可能导致统计异常或 TLS 失败）。",
      "若配置与网络都正常仍无法连接：按官方建议刷机/恢复出厂；必要时更换控制板。"
    ],
    "steps_en": [
      "Verify pool URL/port/protocol (stratum+tcp/ssl), worker/password for spaces/full-width characters.",
      "Switch to backup pool (failover) to verify if it's a pool-side issue.",
      "Check DNS resolution, gateway egress, port restrictions (farm LAN firewall/throttling).",
      "Confirm NTP time is correct (time drift may cause stats anomalies or TLS failures).",
      "If config and network are both normal but still can't connect: reflash/factory reset per official guide; replace control board if necessary."
    ],
    "escalation": [
      "大面积无法连接：优先排查矿场网络出口与 DNS/NTP；单机问题再升级到控制板。"
    ],
    "escalation_en": [
      "Large-scale connection failure: prioritize farm network egress and DNS/NTP; single machine issues escalate to control board."
    ],
    "verification": [
      "矿池侧算力恢复；拒绝率/断连率回到阈值内；failover 可正常工作。"
    ],
    "verification_en": [
      "Pool-side hashrate recovered; reject rate/disconnect rate within threshold; failover working normally."
    ],
    "artifacts": [
      "矿池配置截图",
      "Ping/DNS/路由追踪结果",
      "矿池侧拒绝率截图"
    ],
    "artifacts_en": [
      "Pool configuration screenshot",
      "Ping/DNS/traceroute results",
      "Pool-side reject rate screenshot"
    ],
    "sources": [
      "bitmain_cant_connect_pool"
    ]
  },
  {
    "playbook_id": "pb_firmware_upgrade_failed",
    "title": "固件：升级失败/固件不匹配/异常重启",
    "title_en": "Firmware: Upgrade Failed / Firmware Mismatch / Abnormal Restart",
    "goal": "在不损坏设备前提下恢复到可用固件与稳定配置。",
    "goal_en": "Recover to a usable firmware and stable configuration without damaging the device.",
    "safety": [
      "升级过程保证电源稳定；避免批量同时升级；保留回滚固件与配置备份。"
    ],
    "safety_en": [
      "Ensure stable power during upgrade; avoid batch upgrading simultaneously; keep rollback firmware and config backup."
    ],
    "steps": [
      "确认固件与机型/控制板版本匹配；重新下载升级包并校验完整性（如提供校验值）。",
      "排查网络不稳定（丢包/断电）导致升级中断；换更稳定的链路重试。",
      "若 Web 升级失败：按官方教程使用 SD/TF 刷机方式恢复。",
      "升级后先加载默认/稳定 profile；逐步恢复个性化设置（矿池、频率、风扇策略）。"
    ],
    "steps_en": [
      "Confirm firmware matches model/control board version; re-download upgrade package and verify integrity (if checksum provided).",
      "Check if network instability (packet loss/power outage) caused upgrade interruption; retry with more stable connection.",
      "If web upgrade fails: Follow official tutorial to use SD/TF card flash recovery method.",
      "After upgrade, load default/stable profile first; gradually restore custom settings (pool, frequency, fan policy)."
    ],
    "escalation": [
      "刷机失败或设备无法启动：升级至维修中心（可能需要重刷存储或更换控制板）。"
    ],
    "escalation_en": [
      "Reflash failure or device won't boot: escalate to repair center (may need storage reflash or control board replacement)."
    ],
    "verification": [
      "固件版本正确；运行 12h 稳定；配置可回滚。"
    ],
    "verification_en": [
      "Firmware version correct; stable operation for 12h; configuration rollback possible."
    ],
    "artifacts": [
      "升级包版本与校验记录",
      "升级日志/截图",
      "刷机步骤记录"
    ],
    "artifacts_en": [
      "Upgrade package version and checksum record",
      "Upgrade log/screenshot",
      "Reflash procedure record"
    ],
    "sources": [
      "bitmain_antminer_failures_troubleshooting"
    ]
  },
  {
    "playbook_id": "pb_thermal_overheat_fan",
    "title": "温控：过温保护/风扇丢失或转速低/温度传感器异常",
    "title_en": "Thermal: Overheat Protection / Fan Lost or Speed Low / Temp Sensor Anomaly",
    "goal": "把过温按“环境→风道→风扇/水泵→散热接触→传感器/固件”顺序定位。",
    "goal_en": "Locate overheat issue following: environment → airflow → fan/pump → thermal contact → sensor/firmware.",
    "safety": [
      "高温烫伤风险；停机降温后再拆机。",
      "未安装散热器/冷板的板级测试严禁长时间上电。"
    ],
    "safety_en": [
      "High temperature burn risk; shut down and cool before disassembly.",
      "Never power on board-level testing without heatsink/cold plate for extended periods."
    ],
    "steps": [
      "收集证据：进/出风温度、水温/流量（如有）、芯片/板温、风扇转速、告警码。",
      "环境与风道：清洁过滤网/风道，确保进风无遮挡；检查机房温湿度是否超标。",
      "风扇/水路：检查风扇是否掉速/异响/线缆松动；水冷检查泵与流量、是否气堵/泄漏。",
      "传感器：出现 Read Temp Sensor Failed / 温度读取错误时，优先检查线缆与传感器，再考虑刷机或板级维修。",
      "配置：临时降频/限功率验证稳定性，再逐步恢复。"
    ],
    "steps_en": [
      "Collect evidence: inlet/outlet air temp, water temp/flow (if applicable), chip/board temp, fan speed, alert codes.",
      "Environment and airflow: Clean filters/airway, ensure unobstructed inlet; check room temp/humidity within spec.",
      "Fan/water path: Check fan for speed drop/noise/loose cables; water cooling check pump and flow, air locks/leaks.",
      "Sensor: When Read Temp Sensor Failed / temp reading error occurs, first check cables and sensor, then consider reflash or board-level repair.",
      "Configuration: Temporarily reduce frequency/power limit to verify stability, then gradually restore."
    ],
    "escalation": [
      "持续过温或单板温度异常：升级至维修中心（可能涉及导热/器件/芯片损伤）。"
    ],
    "escalation_en": [
      "Persistent overheat or single board temp anomaly: escalate to repair center (may involve thermal compound/component/chip damage)."
    ],
    "verification": [
      "目标功率下 12h 稳定；不触发过温保护；风扇/泵工作正常。"
    ],
    "verification_en": [
      "Stable at target power for 12h; no overheat protection triggered; fan/pump operating normally."
    ],
    "artifacts": [
      "温度/风扇曲线截图",
      "风道清洁前后照片",
      "告警日志片段"
    ],
    "artifacts_en": [
      "Temperature/fan curve screenshot",
      "Airway cleaning before/after photo",
      "Alert log snippet"
    ],
    "sources": [
      "bitmain_antminer_failures_troubleshooting",
      "bitmain_hashrate_zero",
      "whatsminer_error_codes_pdf_20210930"
    ]
  },
  {
    "playbook_id": "pb_hashrate_low_fluctuation",
    "title": "算力：持续低算力/波动/拒绝率高",
    "title_en": "Hashrate: Persistent Low Hashrate / Fluctuation / High Reject Rate",
    "goal": "先排温控与缺链，再排矿池/网络，最后排固件与硬件退化。",
    "goal_en": "First check thermal and missing chains, then pool/network, finally firmware and hardware degradation.",
    "safety": [
      "避免长时间超频在不稳定状态运行（可能导致更严重损坏）。"
    ],
    "safety_en": [
      "Avoid running overclocked in unstable state for extended periods (may cause more serious damage)."
    ],
    "steps": [
      "确认口径：对比矿机侧 5m/1h/12h 与矿池侧算力；区分短期波动与持续低算力。",
      "先按温控 playbook 排查是否降频或过温。",
      "检查缺链/缺芯片/硬件错误率（HW/MH error）是否超阈值；若有进入哈希板诊断。",
      "排查网络延迟与矿池断连；启用备用矿池/切换线路验证。",
      "恢复默认/稳定 profile；逐步上调，记录触发点；必要时刷机后再验证。"
    ],
    "steps_en": [
      "Confirm metrics: Compare miner-side 5m/1h/12h vs pool-side hashrate; distinguish short-term fluctuation from persistent low hashrate.",
      "First follow thermal playbook to check for frequency throttling or overheating.",
      "Check for missing chains/chips/hardware error rate (HW/MH error) exceeding threshold; if so, proceed to hash board diagnostics.",
      "Check network latency and pool disconnects; enable backup pool/switch line for verification.",
      "Restore default/stable profile; gradually increase, record trigger points; reflash and re-verify if necessary."
    ],
    "escalation": [
      "单链异常或 HW error 持续偏高：升级板级检修。"
    ],
    "escalation_en": [
      "Single chain anomaly or persistent high HW error: escalate to board-level repair."
    ],
    "verification": [
      "12h 平均算力达标；拒绝率、HW error 在阈值内。"
    ],
    "verification_en": [
      "12h average hashrate on target; reject rate, HW error within threshold."
    ],
    "artifacts": [
      "矿池侧算力/拒绝率截图",
      "矿机侧日志与平均算力",
      "网络延迟测试"
    ],
    "artifacts_en": [
      "Pool-side hashrate/reject rate screenshot",
      "Miner-side log and average hashrate",
      "Network latency test"
    ],
    "sources": [
      "bitmain_antminer_failures_troubleshooting",
      "canaan_miner_log_tech_guidance"
    ]
  },
  {
    "playbook_id": "pb_missing_chain_asic",
    "title": "哈希板：缺链/找不全芯片/0 ASIC/EEPROM 异常",
    "title_en": "Hash Board: Missing Chain / Incomplete ASIC Detection / 0 ASIC / EEPROM Anomaly",
    "goal": "从整机定位到具体链/板，再用单板测试与电气测量定位到电压域/芯片。",
    "goal_en": "Locate from whole machine to specific chain/board, then use single board test and electrical measurement to pinpoint voltage domain/chip.",
    "safety": [
      "断电放电后拆装；注意大电流接插件发热与烧蚀。",
      "单板测试必须配套散热与治具；避免上电烧板。"
    ],
    "safety_en": [
      "Power off and discharge before disassembly; be aware of high-current connector heat and burn marks.",
      "Single board testing must include cooling (heatsink/cold plate/forced air); avoid powering on without cooling."
    ],
    "steps": [
      "根据日志定位异常 chain/board；映射到物理板位并检查信号线/供电线是否松动或烧蚀。",
      "互换验证：把疑似故障板与正常板互换位置，确认问题是否随板迁移（排除控制板端口）。",
      "单板测试（治具/PT）：确定缺失芯片范围（全无/少量/某域）。",
      "优先处理：短路、虚焊、异物、烧蚀器件；EEPROM/温度传感器错误优先查对应器件与供电。",
      "复测通过后回装整机，做老化测试。"
    ],
    "steps_en": [
      "Locate abnormal chain/board from logs; map to physical board position and check signal/power cables for looseness or burn marks.",
      "Swap verification: Exchange suspected faulty board with normal board to confirm if issue follows the board (rule out control board port).",
      "Single board test (fixture/PT): Determine missing chip range (all/few/specific domain).",
      "Priority fixes: Short circuits, cold solder joints, foreign objects, burned components; EEPROM/temp sensor errors check corresponding components and power supply first.",
      "After passing retest, reinstall in machine and run burn-in test."
    ],
    "escalation": [
      "需要 BGA 换芯片、复杂信号测量、治具固件升级时升级至维修中心。"
    ],
    "escalation_en": [
      "Escalate to repair center when BGA chip replacement, complex signal measurement, or fixture firmware upgrade is needed."
    ],
    "verification": [
      "芯片数量识别完整；整机链路全正常；算力与温度稳定。"
    ],
    "verification_en": [
      "Full ASIC count detected; all chains normal in machine; hashrate and temperature stable."
    ],
    "artifacts": [
      "日志链路/ASIC 截图",
      "单板测试结果",
      "关键测点电压/阻抗记录"
    ],
    "artifacts_en": [
      "Log chain/ASIC screenshot",
      "Single board test results",
      "Key test point voltage/impedance records"
    ],
    "sources": [
      "zeus_s21_xp_hashboard_repair",
      "whatsminer_error_codes_pdf_20210930",
      "bitmain_antminer_failures_troubleshooting"
    ]
  },
  {
    "playbook_id": "pb_time_ntp_sync",
    "title": "时间：NTP 不同步/时间漂移/统计异常",
    "title_en": "Time: NTP Out of Sync / Time Drift / Stats Anomaly",
    "goal": "保证矿机时间正确，减少算力统计偏差、断连与证书问题。",
    "goal_en": "Ensure miner time is correct to reduce hashrate stats deviation, disconnects, and certificate issues.",
    "safety": [
      "改动网络基线时先在单机验证，避免影响全场。"
    ],
    "safety_en": [
      "Verify on a single machine first when changing network baseline; avoid affecting the entire farm."
    ],
    "steps": [
      "确认矿机时间与时区；检查是否启用 NTP；记录 offset。",
      "检查矿机网段 DNS/出网是否能访问 NTP server；必要时在局域网提供本地 NTP。",
      "重启 NTP 服务或重启矿机验证；观察算力统计是否恢复稳定。",
      "若时间反复漂移：排查网关/防火墙是否拦截 NTP(UDP/123)，以及控制板系统异常。"
    ],
    "steps_en": [
      "Confirm miner time and timezone; check if NTP is enabled; record offset.",
      "Check if miner subnet DNS/egress can reach NTP server; provide local NTP on LAN if necessary.",
      "Restart NTP service or reboot miner to verify; observe if hashrate stats recover to stable.",
      "If time keeps drifting: Check if gateway/firewall is blocking NTP (UDP/123), and control board system anomaly."
    ],
    "escalation": [
      "持续无法同步且影响运行：升级到控制板/固件排查。"
    ],
    "escalation_en": [
      "Persistent inability to sync affecting operation: escalate to control board/firmware troubleshooting."
    ],
    "verification": [
      "时间稳定；算力统计一致；不再出现相关告警。"
    ],
    "verification_en": [
      "Time stable; hashrate stats consistent; no more related alerts."
    ],
    "artifacts": [
      "时间/时区截图",
      "NTP server 配置",
      "网络抓包/端口检查（可选）"
    ],
    "artifacts_en": [
      "Time/timezone screenshot",
      "NTP server configuration",
      "Network capture/port check (optional)"
    ],
    "sources": [
      "whatsminer_product_manuals"
    ]
  },
  {
    "playbook_id": "pb_storage_disk_full",
    "title": "存储：磁盘满/日志爆炸/系统不稳定",
    "title_en": "Storage: Disk Full / Log Overflow / System Instability",
    "goal": "避免因存储耗尽导致的重启、服务崩溃、升级失败。",
    "goal_en": "Prevent restarts, service crashes, and upgrade failures caused by storage exhaustion.",
    "safety": [
      "清理前先导出关键日志；谨慎删除系统文件。"
    ],
    "safety_en": [
      "Export key logs before cleanup; be cautious when deleting system files."
    ],
    "steps": [
      "检查日志与可用空间；导出故障时间窗口日志用于 RCA。",
      "清理过旧日志/缓存；降低调试日志级别（如可配置）。",
      "若升级失败或服务异常：按固件恢复 playbook 做刷机/恢复出厂。",
      "建立日志轮转与容量告警（App 侧也要监控）。"
    ],
    "steps_en": [
      "Check logs and available space; export fault window logs for RCA.",
      "Clean old logs/cache; reduce debug log level (if configurable).",
      "If upgrade fails or service is abnormal: Follow firmware recovery playbook for reflash/factory reset.",
      "Establish log rotation and capacity alerts (app-side monitoring too)."
    ],
    "escalation": [
      "无法进入系统或反复崩溃：升级到刷机/更换控制板。"
    ],
    "escalation_en": [
      "Cannot access system or repeated crashes: escalate to reflash/control board replacement."
    ],
    "verification": [
      "空间恢复到安全阈值；运行稳定；升级可完成。"
    ],
    "verification_en": [
      "Space recovered to safe threshold; running stable; upgrade can complete."
    ],
    "artifacts": [
      "空间占用截图",
      "日志目录列表",
      "清理前后对比"
    ],
    "artifacts_en": [
      "Space usage screenshot",
      "Log directory listing",
      "Before/after cleanup comparison"
    ],
    "sources": [
      "bitmain_antminer_failures_troubleshooting"
    ]
  }
]