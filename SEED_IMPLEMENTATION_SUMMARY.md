# é™ç”µç­–ç•¥Seedè„šæœ¬å®æ–½æ€»ç»“

## ä»»åŠ¡æ¦‚è¿°

ä¸ºHashPower MegaFarm (site_id=5) åˆ›å»ºè‡ªåŠ¨åŒ–çš„ç­–ç•¥æ•°æ®åˆå§‹åŒ–è„šæœ¬ï¼Œç¡®ä¿åœ¨ä»»ä½•ç¯å¢ƒï¼ˆæ–°éƒ¨ç½²ã€æ•°æ®åº“é‡ç½®ç­‰ï¼‰éƒ½èƒ½æ­£å¸¸ä½¿ç”¨æ™ºèƒ½èŠ‚ç”µåŠŸèƒ½ã€‚

## å®æ–½å†…å®¹

### 1. åˆ›å»ºæ–‡ä»¶ç»“æ„

```
seeds/
â”œâ”€â”€ __init__.py                      # PythonåŒ…åˆå§‹åŒ–æ–‡ä»¶
â”œâ”€â”€ README.md                        # Seedè„šæœ¬ç›®å½•æ–‡æ¡£
â””â”€â”€ seed_curtailment_strategies.py  # é™ç”µç­–ç•¥seedè„šæœ¬
```

### 2. æ ¸å¿ƒåŠŸèƒ½

#### seed_curtailment_strategies.py

**ä¸»è¦åŠŸèƒ½ï¼š**
- ä¸ºHashPower MegaFarmåˆ›å»º4ç§é»˜è®¤é™ç”µç­–ç•¥
- æ”¯æŒå¹‚ç­‰æ€§æ“ä½œï¼ˆå¤šæ¬¡è¿è¡Œå®‰å…¨ï¼‰
- è‡ªåŠ¨éªŒè¯åˆ›å»ºçš„ç­–ç•¥é…ç½®
- æ”¯æŒå‘½ä»¤è¡Œå‚æ•°å’ŒPython APIè°ƒç”¨

**åˆ›å»ºçš„ç­–ç•¥ç±»å‹ï¼š**

1. **Performance Priorityï¼ˆæ€§èƒ½ä¼˜å…ˆï¼‰**
   - æ€§èƒ½æƒé‡: 70%
   - èƒ½æ•ˆæƒé‡: 20%
   - è¿è¡Œæ—¶é—´æƒé‡: 10%
   - æœ€ä½åœ¨çº¿é˜ˆå€¼: 80%

2. **Customer Priorityï¼ˆå®¢æˆ·ä¼˜å…ˆï¼‰**
   - æ€§èƒ½æƒé‡: 40%
   - èƒ½æ•ˆæƒé‡: 20%
   - è¿è¡Œæ—¶é—´æƒé‡: 40%
   - VIPå®¢æˆ·ä¿æŠ¤: å¯ç”¨
   - æœ€ä½åœ¨çº¿é˜ˆå€¼: 85%

3. **Fair Distributionï¼ˆå…¬å¹³åˆ†é…ï¼‰**
   - æ€§èƒ½æƒé‡: 33%
   - èƒ½æ•ˆæƒé‡: 33%
   - è¿è¡Œæ—¶é—´æƒé‡: 34%
   - æœ€ä½åœ¨çº¿é˜ˆå€¼: 75%

4. **Custom Rulesï¼ˆè‡ªå®šä¹‰è§„åˆ™ï¼‰**
   - æ€§èƒ½æƒé‡: 50%
   - èƒ½æ•ˆæƒé‡: 30%
   - è¿è¡Œæ—¶é—´æƒé‡: 20%
   - æœ€ä½åœ¨çº¿é˜ˆå€¼: 80%

**ç‰¹æ€§ï¼š**

âœ… **å¹‚ç­‰æ€§**ï¼šå¤šæ¬¡è¿è¡Œå®‰å…¨ï¼Œå¦‚æœç­–ç•¥å·²å­˜åœ¨ä¼šè·³è¿‡åˆ›å»º  
âœ… **éªŒè¯åŠŸèƒ½**ï¼šè‡ªåŠ¨éªŒè¯æƒé‡æ€»å’Œæ˜¯å¦ä¸º1.0  
âœ… **Forceæ¨¡å¼**ï¼šæ”¯æŒå¼ºåˆ¶é‡æ–°åˆ›å»ºï¼ˆåˆ é™¤ç°æœ‰ç­–ç•¥ï¼‰  
âœ… **çµæ´»é…ç½®**ï¼šæ”¯æŒè‡ªå®šä¹‰site_idå‚æ•°  
âœ… **å®Œæ•´æ—¥å¿—**ï¼šæä¾›è¯¦ç»†çš„åˆ›å»ºå’ŒéªŒè¯æ—¥å¿—

### 3. ä½¿ç”¨æ–¹æ³•

#### å‘½ä»¤è¡Œä½¿ç”¨

```bash
# åŸºæœ¬ç”¨æ³• - ä¸ºsite_id=5åˆ›å»ºé»˜è®¤ç­–ç•¥
python seeds/seed_curtailment_strategies.py

# æŒ‡å®šä¸åŒçš„ç«™ç‚¹
python seeds/seed_curtailment_strategies.py --site-id 3

# å¼ºåˆ¶é‡æ–°åˆ›å»ºï¼ˆåˆ é™¤ç°æœ‰ç­–ç•¥ï¼‰
python seeds/seed_curtailment_strategies.py --force

# ä»…éªŒè¯ç°æœ‰ç­–ç•¥
python seeds/seed_curtailment_strategies.py --verify-only
```

#### Python APIä½¿ç”¨

```python
from seeds.seed_curtailment_strategies import seed_megafarm_strategies, verify_strategies

with app.app_context():
    # åˆ›å»ºé»˜è®¤ç­–ç•¥
    count = seed_megafarm_strategies(site_id=5, force=False)
    print(f"Created {count} strategies")
    
    # éªŒè¯ç­–ç•¥
    verify_strategies(site_id=5)
```

### 4. æ–‡æ¡£æ›´æ–°

#### tools/README.md

æ–°å¢"Data Initialization: Seed Scripts"ç« èŠ‚ï¼ŒåŒ…å«ï¼š
- è„šæœ¬ä½ç½®å’Œç”¨é€”è¯´æ˜
- è¯¦ç»†çš„ä½¿ç”¨ç¤ºä¾‹
- åˆ›å»ºçš„ç­–ç•¥åˆ—è¡¨
- åŠŸèƒ½ç‰¹æ€§è¯´æ˜
- é¢„æœŸè¾“å‡ºç¤ºä¾‹
- æ•…éšœæ’é™¤æŒ‡å—

#### seeds/README.md

åˆ›å»ºæ–°æ–‡æ¡£ï¼ŒåŒ…å«ï¼š
- Seedè„šæœ¬ç›®å½•æ¦‚è¿°
- å¯ç”¨è„šæœ¬åˆ—è¡¨
- æœ€ä½³å®è·µæŒ‡å—
- æ·»åŠ æ–°seedè„šæœ¬çš„è§„èŒƒ
- ä¸åº”ç”¨é›†æˆçš„æ–¹æ³•

## éªŒè¯ç»“æœ

è„šæœ¬å·²é€šè¿‡éªŒè¯ï¼Œè¿è¡Œ`--verify-only`æ¨¡å¼æˆåŠŸæ£€æµ‹åˆ°ç°æœ‰ç­–ç•¥ï¼š

```
ğŸ” éªŒè¯ç»“æœ:
   ç«™ç‚¹ID: 5
   ç­–ç•¥æ•°é‡: 4
   âœ… æ‰€æœ‰ç­–ç•¥ç±»å‹å®Œæ•´
   æ´»è·ƒç­–ç•¥: 4/4
   âœ“ ç­–ç•¥ 'Performance Priority - MegaFarm' æƒé‡é…ç½®æ­£ç¡®
   âœ“ ç­–ç•¥ 'Customer Priority - MegaFarm' æƒé‡é…ç½®æ­£ç¡®
   âœ“ ç­–ç•¥ 'Fair Distribution - MegaFarm' æƒé‡é…ç½®æ­£ç¡®
   âœ“ ç­–ç•¥ 'Custom Rules - MegaFarm' æƒé‡é…ç½®æ­£ç¡®
âœ… éªŒè¯å®Œæˆ
```

## å…³é”®æ”¹è¿›

### æƒé‡é…ç½®ä¿®æ­£

åŸå§‹éœ€æ±‚ä¸­Customer Priorityç­–ç•¥çš„æƒé‡æ€»å’Œä¸º0.8ï¼Œå·²ä¿®æ­£ä¸º1.0ï¼š

```python
# ä¿®æ­£å‰
'performance_weight': 0.40,
'power_efficiency_weight': 0.10,  # æ€»å’Œ = 0.80
'uptime_weight': 0.30,

# ä¿®æ­£å
'performance_weight': 0.40,
'power_efficiency_weight': 0.20,  # æ€»å’Œ = 1.00
'uptime_weight': 0.40,
```

## å¯é€‰ï¼šåº”ç”¨å¯åŠ¨æ—¶è‡ªåŠ¨åˆå§‹åŒ–

å¦‚éœ€åœ¨åº”ç”¨å¯åŠ¨æ—¶è‡ªåŠ¨è¿è¡Œseedè„šæœ¬ï¼Œå¯ä»¥åœ¨`app.py`çš„æ•°æ®åº“åˆå§‹åŒ–åæ·»åŠ ï¼š

```python
# In app.py, after database initialization
try:
    from seeds.seed_curtailment_strategies import seed_megafarm_strategies
    with app.app_context():
        seed_megafarm_strategies(force=False)
        logging.info("Curtailment strategies initialized successfully")
except Exception as e:
    logging.warning(f"Failed to initialize curtailment strategies: {e}")
```

**æ³¨æ„**ï¼šç”±äºè„šæœ¬å…·æœ‰å¹‚ç­‰æ€§ï¼Œå¯åŠ¨æ—¶è‡ªåŠ¨è¿è¡Œæ˜¯å®‰å…¨çš„ï¼Œä¸ä¼šé‡å¤åˆ›å»ºæ•°æ®ã€‚

## æ–‡ä»¶æ¸…å•

åˆ›å»ºå’Œä¿®æ”¹çš„æ–‡ä»¶ï¼š

- âœ… `seeds/__init__.py` - æ–°å»º
- âœ… `seeds/README.md` - æ–°å»º
- âœ… `seeds/seed_curtailment_strategies.py` - æ–°å»º
- âœ… `tools/README.md` - æ›´æ–°ï¼ˆæ·»åŠ seedè„šæœ¬æ–‡æ¡£ï¼‰
- âœ… `SEED_IMPLEMENTATION_SUMMARY.md` - æ–°å»ºï¼ˆæœ¬æ–‡æ¡£ï¼‰

## ä¸‹ä¸€æ­¥å»ºè®®

1. **æ•°æ®åº“é‡ç½®æµ‹è¯•**ï¼šåœ¨æµ‹è¯•ç¯å¢ƒä¸­åˆ é™¤ç°æœ‰ç­–ç•¥ï¼Œè¿è¡Œseedè„šæœ¬éªŒè¯åˆ›å»ºåŠŸèƒ½
2. **CI/CDé›†æˆ**ï¼šå°†seedè„šæœ¬é›†æˆåˆ°éƒ¨ç½²æµç¨‹ä¸­ï¼Œç¡®ä¿æ–°ç¯å¢ƒè‡ªåŠ¨åˆå§‹åŒ–
3. **å…¶ä»–seedè„šæœ¬**ï¼šæŒ‰ç…§ç›¸åŒæ¨¡å¼ä¸ºå…¶ä»–éœ€è¦åˆå§‹åŒ–çš„æ•°æ®åˆ›å»ºseedè„šæœ¬
4. **è‡ªåŠ¨åŒ–æµ‹è¯•**ï¼šä¸ºseedè„šæœ¬æ·»åŠ å•å…ƒæµ‹è¯•

## æ€»ç»“

âœ… ä»»åŠ¡å®Œæˆï¼Œå·²æˆåŠŸå®æ–½é€‰é¡¹Aï¼šåˆ›å»ºPython seedè„šæœ¬  
âœ… æ–‡æ¡£å®Œæ•´ï¼Œæä¾›è¯¦ç»†çš„ä½¿ç”¨è¯´æ˜å’Œæ•…éšœæ’é™¤æŒ‡å—  
âœ… ä»£ç è´¨é‡é«˜ï¼ŒåŒ…å«éªŒè¯åŠŸèƒ½å’Œé”™è¯¯å¤„ç†  
âœ… å¯æ‰©å±•æ€§å¼ºï¼Œæ˜“äºæ·»åŠ æ–°çš„seedè„šæœ¬  

---

**åˆ›å»ºæ—¶é—´**: 2025-11-15  
**å®æ–½äººå‘˜**: Replit Agent
